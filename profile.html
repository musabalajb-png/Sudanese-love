<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title id="profileTitle">Ù…Ù„Ù Ø´Ø®ØµÙŠ | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <meta name="description" content="ØªØ¹Ø±Ù Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø­ØªÙ…Ù„ ÙÙŠ Ù…Ù†ØµØ© Ù†ØµÙŠØ¨ Ù„Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¬Ø§Ø¯. Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ø³ØªØ± Ù‡Ù…Ø§ Ù‡Ø¯ÙÙ†Ø§.">
    <meta property="og:type" content="profile">
    <meta property="og:site_name" content="Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    
    <style>
        :root { --main-font: 'Cairo', sans-serif; --primary-green: #15803d; --accent-gold: #fbbf24; }
        [dir="ltr"] { --main-font: 'Poppins', sans-serif; }
        body { font-family: var(--main-font); background: #f8fafc; min-height: 100vh; user-select: none; }
        
        .profile-container { background: white; border-radius: 3rem; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); width: 100%; max-width: 500px; overflow: hidden; position: relative; margin: 20px auto; border: 1px solid #f1f5f9; }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„ØºØ·Ø§Ø¡ */
        .profile-img-box { width: 100%; height: 500px; position: relative; overflow: hidden; background: #1e293b; }
        .profile-img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .blur-effect { filter: blur(40px); transform: scale(1.1); }
        
        /* Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ© */
        .seriousness-bar { position: absolute; bottom: 100px; left: 20px; right: 20px; height: 6px; background: rgba(255,255,255,0.2); border-radius: 10px; z-index: 20; }
        .seriousness-fill { height: 100%; background: var(--accent-gold); border-radius: 10px; transition: 1s ease-out; }

        .glass-nav { position: absolute; top: 25px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 20px; z-index: 50; }
        .icon-btn { background: rgba(0,0,0,0.3); color: white; width: 45px; height: 45px; border-radius: 1.2rem; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        
        .profile-header-info { background: linear-gradient(to top, white 30%, rgba(255,255,255,0.8) 60%, transparent); position: absolute; bottom: 0; width: 100%; padding: 40px 25px 20px; }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tab-btn { @apply flex-1 py-3 text-xs font-black text-slate-400 border-b-2 border-transparent transition-all; }
        .tab-btn.active { @apply text-green-700 border-green-700; }
        
        .info-pill { background: #ffffff; border: 1px solid #f1f5f9; border-radius: 1.5rem; padding: 12px; text-align: center; transition: 0.3s; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.02); }
        .info-pill:hover { border-color: var(--primary-green); transform: translateY(-2px); }
        
        .rose-anim { position: absolute; font-size: 2.5rem; animation: floatRose 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; z-index: 60; pointer-events: none; }
        @keyframes floatRose { 0% { transform: translateY(0) rotate(0); opacity: 1; } 100% { transform: translateY(-300px) rotate(45deg); opacity: 0; } }
        
        .verified-badge { color: #3b82f6; font-size: 1.2rem; }
        .locked-gallery { background: #f1f5f9; border: 2px dashed #cbd5e1; height: 150px; border-radius: 2rem; display: flex; flex-direction: column; items-center justify-content: center; gap-2; }
        @keyframes animate-slide-up { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-up { animation: animate-slide-up 0.5s ease-out forwards; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="profile-container animate-slide-up">
        <div class="glass-nav">
            <button onclick="goBack()" class="icon-btn hover:bg-green-600 transition"><i class="fas fa-arrow-right" id="backIcon"></i></button>
            <div class="flex gap-2">
                <button onclick="shareProfile()" class="icon-btn hover:bg-blue-600"><i class="fas fa-share-alt"></i></button>
                <button onclick="toggleLang()" id="langBtn" class="bg-white text-slate-800 px-4 py-1 rounded-xl text-[10px] font-black shadow-xl transition active:scale-90 border border-slate-100">English</button>
            </div>
        </div>

        <div class="profile-img-box">
            <div id="vipBadge" class="hidden absolute top-24 right-5 bg-gradient-to-r from-amber-400 to-yellow-600 text-white px-4 py-1.5 rounded-full text-[9px] font-black z-10 shadow-2xl border border-white/20 animate-bounce">
                <i class="fas fa-crown mr-1"></i> Ø¹Ø¶ÙˆÙŠÙ€Ø© VIP
            </div>
            
            <div class="seriousness-bar">
                <div class="seriousness-fill" id="seriousnessFill" style="width: 0%"></div>
                <span class="absolute -top-5 right-0 text-[9px] font-black text-white/80">Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ©: <span id="seriousnessVal">0</span>%</span>
            </div>

            <img id="profileImage" src="" class="blur-effect" onerror="this.src='https://ui-avatars.com/api/?background=random&name=User'">
            
            <div class="profile-header-info">
                <div class="flex items-center gap-2 mb-1">
                    <h2 id="profileName" class="text-3xl font-black text-slate-800 tracking-tighter">...</h2>
                    <i class="fas fa-check-circle verified-badge" title="Ù…ÙˆØ«Ù‚"></i>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <p id="profileLocation" class="text-slate-500 font-bold text-xs">...</p>
                </div>
            </div>
        </div>

        <div class="flex border-b border-slate-100 bg-white sticky top-0 z-30">
            <button onclick="switchTab('about')" id="tabAbout" class="tab-btn active" data-ar="Ø¹Ù†ÙŠ" data-en="About">Ø¹Ù†ÙŠ</button>
            <button onclick="switchTab('specs')" id="tabSpecs" class="tab-btn" data-ar="Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª" data-en="Requirements">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</button>
            <button onclick="switchTab('gallery')" id="tabGallery" class="tab-btn" data-ar="Ø§Ù„Ù…Ø¹Ø±Ø¶" data-en="Gallery">Ø§Ù„Ù…Ø¹Ø±Ø¶</button>
        </div>

        <div class="p-6">
            <div id="contentAbout" class="tab-content">
                <div class="grid grid-cols-3 gap-2 mb-6">
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„Ø¹Ù…Ø±" data-en="Age">Ø§Ù„Ø¹Ù…Ø±</p><b id="pAge" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„Ø­Ø§Ù„Ø©" data-en="Status">Ø§Ù„Ø­Ø§Ù„Ø©</p><b id="pStatus" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„Ù…Ù‡Ù†Ø©" data-en="Job">Ø§Ù„Ù…Ù‡Ù†Ø©</p><b id="pJob" class="text-slate-700 text-xs truncate block">-</b></div>
                </div>

                <div class="space-y-4 mb-6">
                    <div class="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                        <h4 class="font-black text-slate-700 text-xs mb-2 flex items-center gap-2">
                            <i class="fas fa-quote-right text-green-600"></i>
                            <span data-ar="ØªØ¹Ø±ÙŠÙ Ø´Ø®ØµÙŠ" data-en="Bio">ØªØ¹Ø±ÙŠÙ Ø´Ø®ØµÙŠ</span>
                        </h4>
                        <p id="pBio" class="text-slate-500 text-[11px] leading-relaxed font-bold">Ø¹Ø¶Ùˆ Ø¬Ø§Ø¯ ÙŠØ¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± ÙˆØ§Ù„Ø³ØªØ± Ø§Ù„Ø­Ù„Ø§Ù„ Ø¹Ø¨Ø± Ù…Ù†ØµØ© Ù†ØµÙŠØ¨...</p>
                    </div>

                    <div class="grid grid-cols-1 gap-2">
                        <div class="flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl">
                            <span class="text-[10px] font-black text-slate-600"><i class="fas fa-home mr-2 text-blue-500"></i> Ø§Ù„Ø³ÙƒÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ø²ÙˆØ§Ø¬</span>
                            <span class="text-[10px] font-black text-green-700 bg-green-50 px-2 py-1 rounded-md">Ù…Ø³ØªÙ‚Ù„</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-white border border-slate-100 rounded-xl">
                            <span class="text-[10px] font-black text-slate-600"><i class="fas fa-briefcase mr-2 text-amber-500"></i> Ø¹Ù…Ù„ Ø§Ù„Ù…Ø±Ø£Ø©</span>
                            <span class="text-[10px] font-black text-amber-700 bg-amber-50 px-2 py-1 rounded-md">Ø­Ø³Ø¨ Ø§Ù„Ø§ØªÙØ§Ù‚</span>
                        </div>
                    </div>
                </div>
            </div>

            <div id="contentSpecs" class="tab-content hidden">
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„Ø·ÙˆÙ„" data-en="Height">Ø§Ù„Ø·ÙˆÙ„</p><b id="pHeight" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„ÙˆØ²Ù†" data-en="Weight">Ø§Ù„ÙˆØ²Ù†</p><b id="pWeight" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„Ø¨Ø´Ø±Ø©" data-en="Skin">Ø§Ù„Ø¨Ø´Ø±Ø©</p><b id="pSkin" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold" data-ar="Ø§Ù„ØªØ¯Ø®ÙŠÙ†" data-en="Smoking">Ø§Ù„ØªØ¯Ø®ÙŠÙ†</p><b class="text-slate-700 text-xs">Ù„Ø§</b></div>
                </div>
                <div class="bg-amber-50 p-5 rounded-3xl border border-amber-100 mb-6">
                    <h4 class="font-black text-amber-800 mb-2 flex items-center gap-2 text-xs">
                        <i class="fas fa-heart text-red-500"></i>
                        <span data-ar="Ù…Ø§ Ø£Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ" data-en="What I seek">Ù…Ø§ Ø£Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ</span>
                    </h4>
                    <p id="pReq" class="text-amber-900 text-[11px] leading-relaxed font-bold">...</p>
                </div>
            </div>

            <div id="contentGallery" class="tab-content hidden">
                <div class="locked-gallery">
                    <i class="fas fa-lock text-slate-400 text-2xl mb-2"></i>
                    <p class="text-[10px] font-black text-slate-500" data-ar="Ø§Ù„ØµÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ù…ØºÙ„Ù‚Ø©" data-en="Private Gallery Locked">Ø§Ù„ØµÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ù…ØºÙ„Ù‚Ø©</p>
                    <button onclick="requestVideo()" class="mt-2 text-[10px] font-black text-green-700 underline">Ø§Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø±Ø¤ÙŠØ© Ø§Ù„ØµÙˆØ±</button>
                </div>
            </div>
            
            <div class="flex gap-3 justify-center relative mt-6" id="actionArea">
                <button onclick="dropGift('ğŸŒ¹')" class="bg-rose-50 text-rose-600 w-16 h-16 rounded-[1.8rem] text-2xl hover:bg-rose-100 transition shadow-sm active:scale-90 flex items-center justify-center border border-rose-100">
                    <i class="fas fa-heart"></i>
                </button>
                <button onclick="openChat()" class="flex-grow bg-green-700 text-white font-black rounded-[1.8rem] shadow-xl hover:bg-green-800 transition active:scale-95 flex items-center justify-center gap-3 text-sm" data-ar="Ø¥Ø¨Ø¯Ø§Ø¡ Ø§Ù‡ØªÙ…Ø§Ù… ğŸ“©" data-en="Show Interest ğŸ“©">
                    Ø¥Ø¨Ø¯Ø§Ø¡ Ø§Ù‡ØªÙ…Ø§Ù… ğŸ“©
                </button>
                <button onclick="requestVideo()" class="bg-slate-900 text-amber-400 w-16 h-16 rounded-[1.8rem] text-xl hover:bg-black transition shadow-xl active:scale-90 flex items-center justify-center border border-slate-700">
                    <i class="fas fa-video"></i>
                </button>
            </div>
        </div>

        <p class="text-center text-[9px] text-slate-400 pb-8 font-bold">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ«Ù‚Ø© ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© ÙˆÙÙ‚ Ø´Ø±ÙˆØ· Ø§Ù„Ø³ØªØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ© ğŸ‡¸ğŸ‡©</p>
    </div>

    <div id="chatBox" class="hidden fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[100] flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-sm rounded-[3rem] p-8 shadow-2xl relative border-t-[12px] border-green-700 animate-slide-up">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-paper-plane text-green-700 text-xl"></i>
                </div>
                <h3 id="targetName" class="font-black text-slate-800 text-lg"></h3>
                <p class="text-[10px] text-slate-400 font-bold mt-1">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© ØªØ²ÙŠØ¯ ÙØ±Øµ Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ø¨Ù†Ø³Ø¨Ø© 70%</p>
            </div>
            <textarea id="msgInput" class="w-full h-32 p-4 bg-slate-50 rounded-2xl border-none outline-none text-xs font-black shadow-inner focus:ring-2 focus:ring-green-500 transition-all" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ø¨Ù‚Ø© ØªØ¹Ø¨Ø± Ø¹Ù† Ø¬Ø¯ÙŠØªÙƒ..."></textarea>
            <div class="grid grid-cols-2 gap-4 mt-8">
                <button id="sendBtn" onclick="sendToSheet()" class="bg-green-700 text-white py-4 rounded-2xl font-black shadow-lg shadow-green-200 active:scale-95" data-ar="Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†" data-en="Send Now">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†</button>
                <button onclick="closeChat()" class="bg-slate-100 text-slate-500 py-4 rounded-2xl font-black" data-ar="ØªØ±Ø§Ø¬Ø¹" data-en="Cancel">ØªØ±Ø§Ø¬Ø¹</button>
            </div>
        </div>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzOqsZZEKV2FyCQxMRxo2aB8Ld4txzXFdYEKGwXCb48ymeM6nOufWVZmv65jVErV3sL_Q/exec";
        let currentLang = 'ar';
        const profileData = JSON.parse(sessionStorage.getItem('currentProfile') || '{}');

        if (localStorage.getItem('naseeb_logged') !== 'true') window.location.href = 'index.html';

        const dictionary = {
            "Ø§Ù„Ø®Ø±Ø·ÙˆÙ…": "Khartoum", "Ø£Ù…Ø¯Ø±Ù…Ø§Ù†": "Omdurman", "Ø¨Ø­Ø±ÙŠ": "Bahri", "Ø¨ÙˆØ±ØªØ³ÙˆØ¯Ø§Ù†": "Port Sudan",
            "Ø¢Ù†Ø³Ø©": "Single", "Ù…Ø·Ù„Ù‚": "Divorced", "Ø£Ø±Ù…Ù„Ø©": "Widow", "Ù…Ø·Ù„Ù‚Ø©": "Divorced", "Ø£Ø¹Ø²Ø¨": "Single",
            "Ø£Ø¨ÙŠØ¶": "White", "Ù‚Ù…Ø­ÙŠ": "Wheaten", "Ø£Ø³Ù…Ø±": "Dark"
        };

        function init() {
            if (!profileData.name) { goBack(); return; }
            
            // Ù†Ø¸Ø§Ù… Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ø®Ø·Ø·
            const userPlan = localStorage.getItem('userPlan') || 'Ø¹Ø§Ø¯ÙŠØ©';
            const isPaid = /Ø§Ù„Ø³ØªØ±|Ø°Ù‡Ø¨ÙŠØ©|Ù…Ø§Ø³ÙŠØ©|VIP/i.test(userPlan);
            if(isPaid) document.getElementById('profileImage').classList.remove('blur-effect');
            
            if(profileData.plan && /Ø°Ù‡Ø¨ÙŠØ©|Ù…Ø§Ø³ÙŠØ©|VIP/i.test(profileData.plan)) {
                document.getElementById('vipBadge').classList.remove('hidden');
            }

            // ØªØ­Ø±ÙŠÙƒ Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¯ÙŠØ©
            setTimeout(() => {
                const score = calculateSeriousness();
                document.getElementById('seriousnessFill').style.width = score + '%';
                document.getElementById('seriousnessVal').innerText = score;
            }, 500);

            renderData();
        }

        function calculateSeriousness() {
            let score = 50; // Ø£Ø³Ø§Ø³ÙŠ
            if (profileData.img) score += 20;
            if (profileData.requirements) score += 15;
            if (profileData.job) score += 15;
            return score;
        }

        function renderData() {
            const isAr = currentLang === 'ar';
            document.getElementById('profileName').innerText = profileData.name;
            document.getElementById('profileImage').src = profileData.img;
            document.getElementById('profileLocation').innerText = isAr ? (profileData.city || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯") : (dictionary[profileData.city] || profileData.city);
            
            const fields = {
                'pStatus': profileData.status,
                'pSkin': profileData.skin,
                'pJob': profileData.job,
                'pAge': profileData.age,
                'pHeight': profileData.height ? profileData.height + " Ø³Ù…" : "-",
                'pWeight': profileData.weight ? profileData.weight + " ÙƒØ¬Ù…" : "-"
            };

            for (let id in fields) {
                let val = fields[id] || "-";
                document.getElementById(id).innerText = isAr ? val : (dictionary[val] || val);
            }

            document.getElementById('pReq').innerText = profileData.requirements || (isAr ? "ÙŠØ¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙŠÙƒ ÙŠÙ‚Ø¯Ø± Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø²ÙˆØ¬ÙŠØ© ÙˆØ§Ù„Ø³ØªØ±." : "Seeking a partner who values marriage and stability.");
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');
            document.getElementById('content' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
        }

        async function sendToSheet() {
            const msg = document.getElementById('msgInput').value.trim();
            if(!msg) return showToast(currentLang === 'ar' ? "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©" : "Please write a message");

            const btn = document.getElementById('sendBtn');
            btn.disabled = true;
            btn.innerText = "...";

            try {
                await fetch(SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify({
                        sender: localStorage.getItem('userName'),
                        receiver: profileData.name,
                        message: msg,
                        date: new Date().toLocaleString()
                    })
                });
                alert(currentLang === 'ar' ? "ÙˆØµÙ„ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø± âœ…" : "Interest sent successfully âœ…");
                closeChat();
            } catch (e) {
                console.log(e);
            } finally {
                btn.disabled = false;
                btn.innerText = currentLang === 'ar' ? "Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†" : "Send Now";
            }
        }

        function dropGift(emoji) {
            const rose = document.createElement('div');
            rose.className = 'rose-anim'; rose.innerHTML = emoji; 
            rose.style.left = (Math.random() * 60 + 20) + "%";
            document.getElementById('actionArea').appendChild(rose);
            setTimeout(() => rose.remove(), 2500);
        }

        function shareProfile() {
            if (navigator.share) {
                navigator.share({
                    title: 'Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø¹Ù„Ù‰ Ù†ØµÙŠØ¨',
                    text: `Ø´Ø§Ù‡Ø¯ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ ${profileData.name} Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ù†ØµÙŠØ¨ Ù„Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¬Ø§Ø¯`,
                    url: window.location.href
                });
            }
        }

        function toggleLang() {
            const html = document.getElementById('mainHtml');
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            html.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('langBtn').innerText = currentLang === 'ar' ? 'English' : 'Ø¹Ø±Ø¨ÙŠ';
            document.querySelectorAll('[data-ar]').forEach(el => el.innerText = el.getAttribute(`data-${currentLang}`));
            renderData(); 
        }

        function goBack() { window.location.href = 'members.html'; }
        function openChat() { 
            document.getElementById('targetName').innerText = (currentLang === 'ar' ? "Ø±Ø§Ø³Ù„ " : "Message ") + profileData.name;
            document.getElementById('chatBox').classList.remove('hidden'); 
        }
        function closeChat() { document.getElementById('chatBox').classList.add('hidden'); }
        
        function requestVideo() {
            window.open(`https://wa.me/249127910778?text=Ø£ÙˆØ¯ Ø·Ù„Ø¨ ØªÙˆØ«ÙŠÙ‚ ÙÙŠØ¯ÙŠÙˆ Ø£Ùˆ Ø±Ø¤ÙŠØ© Ø§Ù„ØµÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ù„Ù„Ø¹Ø¶Ùˆ: ${profileData.name}`);
        }

        window.onload = init;
    </script>
</body>
</html>
