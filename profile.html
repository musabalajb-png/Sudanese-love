<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="profileTitle">Ù…Ù„Ù Ø´Ø®ØµÙŠ | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-font: 'Cairo', sans-serif; }
        [dir="ltr"] { --main-font: 'Poppins', sans-serif; }
        body { font-family: var(--main-font); background: #f0f4f8; min-height: 100vh; padding: 20px 0; }
        
        .profile-container { background: white; border-radius: 2.5rem; box-shadow: 0 15px 40px rgba(0,0,0,0.1); width: 100%; max-width: 500px; overflow: hidden; position: relative; margin: auto; }
        .profile-img-box { width: 100%; height: 420px; position: relative; overflow: hidden; background: #f8fafc; }
        .profile-img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s ease; }
        .blur-effect { filter: blur(45px); transform: scale(1.2); }
        
        .glass-nav { position: absolute; top: 20px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 20px; z-index: 50; }
        .icon-btn { background: rgba(0,0,0,0.4); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        
        .profile-header-info { background: linear-gradient(to top, white 20%, transparent); position: absolute; bottom: 0; width: 100%; padding: 60px 20px 20px; text-align: center; }
        .info-pill { background: #f8fafc; border: 1px solid #eef2f6; border-radius: 1.2rem; padding: 10px; text-align: center; transition: 0.3s; }
        .info-pill:hover { border-color: #22c55e; transform: translateY(-3px); }
        
        .tooltip { position: relative; }
        .tooltip .tooltiptext { visibility: hidden; width: 140px; background: #333; color: #fff; text-align: center; border-radius: 8px; padding: 5px; position: absolute; z-index: 100; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: 0.3s; font-size: 10px; }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„ÙˆØ±Ø¯Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .rose-anim { position: absolute; font-size: 2rem; animation: floatRose 2s ease-out forwards; z-index: 60; }
        @keyframes floatRose { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-200px) scale(2); opacity: 0; } }
    </style>
</head>
<body class="p-4">

    <div class="profile-container">
        <div class="glass-nav">
            <button onclick="goBack()" class="icon-btn hover:bg-green-600 transition"><i class="fas fa-arrow-right" id="backIcon"></i></button>
            <button onclick="toggleLang()" id="langBtn" class="bg-white/90 text-slate-800 px-4 py-1 rounded-full text-xs font-bold shadow-lg transition active:scale-90">English</button>
        </div>

        <div class="profile-img-box">
            <div id="vipBadge" class="hidden absolute top-20 right-5 bg-gradient-to-r from-amber-400 to-yellow-600 text-white px-4 py-1 rounded-full text-[10px] font-bold z-10 shadow-lg">ğŸ‘‘ VIP</div>
            <img id="profileImage" src="" class="blur-effect">
            <div class="profile-header-info">
                <h2 id="profileName" class="text-3xl font-bold text-slate-800">...</h2>
                <p id="profileLocation" class="text-green-600 font-bold text-sm">...</p>
            </div>
        </div>

        <div class="p-6">
            <div class="grid grid-cols-2 gap-3 mb-6">
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„Ø¹Ù…Ø±" data-en="Age">Ø§Ù„Ø¹Ù…Ø±</p><b id="pAge" class="text-slate-700 text-sm">-</b></div>
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„Ø­Ø§Ù„Ø©" data-en="Status">Ø§Ù„Ø­Ø§Ù„Ø©</p><b id="pStatus" class="text-slate-700 text-sm">-</b></div>
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„Ø·ÙˆÙ„" data-en="Height">Ø§Ù„Ø·ÙˆÙ„</p><b id="pHeight" class="text-slate-700 text-sm">-</b></div>
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„ÙˆØ²Ù†" data-en="Weight">Ø§Ù„ÙˆØ²Ù†</p><b id="pWeight" class="text-slate-700 text-sm">-</b></div>
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„Ø¨Ø´Ø±Ø©" data-en="Skin">Ø§Ù„Ø¨Ø´Ø±Ø©</p><b id="pSkin" class="text-slate-700 text-sm">-</b></div>
                <div class="info-pill"><p class="text-[10px] text-slate-400" data-ar="Ø§Ù„Ù…Ù‡Ù†Ø©" data-en="Job">Ø§Ù„Ù…Ù‡Ù†Ø©</p><b id="pJob" class="text-slate-700 text-sm">-</b></div>
            </div>

            <div class="bg-slate-50 p-5 rounded-3xl border border-slate-100 mb-6">
                <h4 class="font-bold text-slate-700 mb-2 flex items-center gap-2 text-sm">
                    <i class="fas fa-star text-amber-500"></i>
                    <span data-ar="Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©" data-en="Requirements">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</span>
                </h4>
                <p id="pReq" class="text-slate-500 text-xs leading-relaxed">...</p>
            </div>
            
            <div class="flex gap-3 justify-center relative" id="actionArea">
                <button onclick="dropGift('ğŸŒ¹')" class="bg-red-50 text-red-600 w-14 h-14 rounded-2xl text-xl hover:bg-red-100 transition shadow-sm active:scale-95">ğŸŒ¹</button>
                <button onclick="openChat()" class="flex-grow bg-green-600 text-white font-bold rounded-2xl shadow-lg hover:bg-green-700 transition active:scale-95" data-ar="Ø¥Ø¹Ø¬Ø§Ø¨ ğŸ’Œ" data-en="Interest ğŸ’Œ">Ø¥Ø¹Ø¬Ø§Ø¨ ğŸ’Œ</button>
                <div class="tooltip">
                    <button onclick="requestVideo()" class="bg-amber-100 text-amber-600 w-14 h-14 rounded-2xl text-xl hover:bg-amber-200 transition shadow-sm">
                        <i class="fas fa-video"></i>
                    </button>
                    <span class="tooltiptext" id="vTip" data-ar="Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙ‚Ø·" data-en="For members only">Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙ‚Ø·</span>
                </div>
            </div>
        </div>
    </div>

    <div id="chatBox" class="hidden fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4">
        <div class="bg-white w-full max-w-sm rounded-[3rem] p-8 shadow-2xl relative border-t-8 border-green-600">
            <h3 id="targetName" class="font-bold text-center text-xl mb-4 text-slate-800"></h3>
            <textarea id="msgInput" class="w-full h-32 p-4 bg-slate-50 rounded-2xl border-none outline-none text-sm" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."></textarea>
            <div class="grid grid-cols-2 gap-4 mt-6">
                <button onclick="sendLiveMessage()" class="bg-green-600 text-white py-3 rounded-xl font-bold transition hover:bg-green-700" data-ar="Ø¥Ø±Ø³Ø§Ù„" data-en="Send">Ø¥Ø±Ø³Ø§Ù„</button>
                <button onclick="closeChat()" class="bg-slate-100 text-slate-500 py-3 rounded-xl font-bold transition hover:bg-slate-200" data-ar="Ø¥Ù„ØºØ§Ø¡" data-en="Cancel">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'ar';
        const profileData = JSON.parse(sessionStorage.getItem('currentProfile') || '{}');

        // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„ØªØ±Ø¬Ù…Ø©
        const dictionary = {
            "Ø§Ù„Ø®Ø±Ø·ÙˆÙ…": "Khartoum", "Ø£Ù…Ø¯Ø±Ù…Ø§Ù†": "Omdurman", "Ø¨Ø­Ø±ÙŠ": "Bahri", "Ø¨ÙˆØ±ØªØ³ÙˆØ¯Ø§Ù†": "Port Sudan",
            "Ø¢Ù†Ø³Ø©": "Single", "Ù…Ø·Ù„Ù‚": "Divorced", "Ø£Ø±Ù…Ù„Ø©": "Widow", "Ù…Ø·Ù„Ù‚Ø©": "Divorced", "Ø£Ø¹Ø²Ø¨": "Single",
            "Ø£Ø¨ÙŠØ¶": "White", "Ù‚Ù…Ø­ÙŠ": "Wheaten", "Ø£Ø³Ù…Ø±": "Dark",
            "Ù…ÙˆØ¸Ù": "Employee", "Ø§Ø¹Ù…Ø§Ù„ Ø­Ø±Ø©": "Freelancer", "Ø·Ø§Ù„Ø¨": "Student", "Ø±Ø¨Ø© Ù…Ù†Ø²Ù„": "Housewife"
        };

        function init() {
            // Ø§Ø®ØªØ¨Ø§Ø± Ø£Ù…Ù†ÙŠ: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø©
            if (!profileData.name) { 
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø¶Ùˆ.");
                window.location.href = 'members.html'; 
                return; 
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯
            const userPlan = localStorage.getItem('userPlan') || 'Ø¹Ø§Ø¯ÙŠØ©';
            const isPaid = /Ø§Ù„Ø³ØªØ±|Ø°Ù‡Ø¨ÙŠØ©|Ù…Ø§Ø³ÙŠØ©/i.test(userPlan);
            
            if(isPaid) {
                document.getElementById('profileImage').classList.remove('blur-effect');
            }
            
            // ÙˆØ³Ù… Ø§Ù„Ù€ VIP
            if(profileData.plan && (profileData.plan.includes('Ø°Ù‡Ø¨ÙŠØ©') || profileData.plan.includes('Ù…Ø§Ø³ÙŠØ©'))) {
                document.getElementById('vipBadge').classList.remove('hidden');
            }

            renderData();
        }

        function renderData() {
            const isAr = currentLang === 'ar';
            document.getElementById('profileName').innerText = profileData.name;
            document.getElementById('profileImage').src = profileData.img;
            
            // ØªØ±Ø¬Ù…Ø© Ø°ÙƒÙŠØ© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            document.getElementById('profileLocation').innerText = isAr ? (profileData.city || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯") : (dictionary[profileData.city] || profileData.city);
            document.getElementById('pStatus').innerText = isAr ? (profileData.status || "-") : (dictionary[profileData.status] || profileData.status);
            document.getElementById('pSkin').innerText = isAr ? (profileData.skin || "-") : (dictionary[profileData.skin] || profileData.skin);
            document.getElementById('pJob').innerText = isAr ? (profileData.job || "-") : (dictionary[profileData.job] || profileData.job);
            
            document.getElementById('pAge').innerText = profileData.age || "-";
            document.getElementById('pHeight').innerText = (profileData.height || "-") + " cm";
            document.getElementById('pWeight').innerText = (profileData.weight || "-") + " kg";
            document.getElementById('pReq').innerText = profileData.requirements || (isAr ? "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§ØµÙØ§Øª Ù…Ø­Ø¯Ø¯Ø©" : "No specific requirements");
            
            // ØªØ­Ø¯ÙŠØ« Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
            document.getElementById('msgInput').placeholder = isAr ? "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø¥Ø¹Ø¬Ø§Ø¨ Ù…Ø­ØªØ±Ù…Ø©..." : "Write a respectful message...";
        }

        function toggleLang() {
            const html = document.getElementById('mainHtml');
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            html.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('langBtn').innerText = currentLang === 'ar' ? 'English' : 'Ø¹Ø±Ø¨ÙŠ';
            document.getElementById('backIcon').className = currentLang === 'ar' ? 'fas fa-arrow-right' : 'fas fa-arrow-left';
            
            // ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø«Ø§Ø¨ØªØ©
            document.querySelectorAll('[data-ar]').forEach(el => {
                el.innerText = el.getAttribute(`data-${currentLang}`);
            });

            renderData(); 
        }

        function goBack() { window.location.href = 'members.html'; }

        // Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„ÙˆØ±Ø¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        function dropGift(emoji) {
            let r = parseInt(localStorage.getItem('roses') || 0);
            if(r <= 0) {
                alert(currentLang === 'ar' ? "Ù†ÙØ¯ Ø±ØµÙŠØ¯Ùƒ Ù…Ù† Ø§Ù„ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ØºØ¯Ø§Ù‹." : "Out of roses! Daily roses refill every 24h.");
                return;
            }
            
            localStorage.setItem('roses', r - 1);
            
            // ØµÙ†Ø¹ ÙˆØ±Ø¯Ø© Ù…ØªØ­Ø±ÙƒØ©
            const rose = document.createElement('div');
            rose.className = 'rose-anim';
            rose.innerHTML = emoji;
            rose.style.left = "20%";
            document.getElementById('actionArea').appendChild(rose);
            
            setTimeout(() => rose.remove(), 2000);
            alert(currentLang === 'ar' ? "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ÙˆØ±Ø¯Ø© Ø¥Ø¹Ø¬Ø§Ø¨ ğŸŒ¹" : "Rose sent successfully ğŸŒ¹");
        }

        function openChat() {
            document.getElementById('targetName').innerText = (currentLang === 'ar' ? "ØªÙˆØ§ØµÙ„ Ù…Ø¹ " : "Message ") + profileData.name;
            document.getElementById('chatBox').classList.remove('hidden');
        }

        function closeChat() { document.getElementById('chatBox').classList.add('hidden'); }

        function sendLiveMessage() {
            const msg = document.getElementById('msgInput').value.trim();
            if(!msg) return alert(currentLang === 'ar' ? "ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ù„Ø©" : "Please write a message");

            let m = parseInt(localStorage.getItem('msgs') || 0);
            if(m <= 0) {
                alert(currentLang === 'ar' ? "Ù†ÙØ¯ Ø±ØµÙŠØ¯ Ø±Ø³Ø§Ø¦Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ…" : "No messages left today");
                return;
            }

            localStorage.setItem('msgs', m - 1);
            alert(currentLang === 'ar' ? "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ âœ…" : "Message sent successfully âœ…");
            closeChat();
        }

        function requestVideo() {
            const userPlan = localStorage.getItem('userPlan') || 'Ø¹Ø§Ø¯ÙŠØ©';
            const isPaid = /Ø°Ù‡Ø¨ÙŠØ©|Ù…Ø§Ø³ÙŠØ©/i.test(userPlan);
            
            if(!isPaid) {
                alert(currentLang === 'ar' ? "Ø·Ù„Ø¨ Ø±Ø¤ÙŠØ© ÙÙŠØ¯ÙŠÙˆ Ù…ØªØ§Ø­ Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø³ÙŠØ© ÙÙ‚Ø·." : "Video requests are for Gold and VIP members only.");
                return;
            }
            window.open(`https://wa.me/249127910778?text=Ø£Ø±ÙŠØ¯ Ø·Ù„Ø¨ Ø±Ø¤ÙŠØ© ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ø¹Ø¶Ùˆ: ${profileData.name}`);
        }

        window.onload = init;
    </script>
</body>
</html>
