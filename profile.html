    <!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title id="profileTitle">Ù…Ù„Ù Ø´Ø®ØµÙŠ | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <meta name="description" content="ØªØ¹Ø±Ù Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠÙƒ Ø§Ù„Ù…Ø­ØªÙ…Ù„ ÙÙŠ Ù…Ù†ØµØ© Ù†ØµÙŠØ¨ Ù„Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¬Ø§Ø¯. Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ø³ØªØ± Ù‡Ù…Ø§ Ù‡Ø¯ÙÙ†Ø§.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    
    <style>
        :root { --main-font: 'Cairo', sans-serif; --primary-green: #15803d; --accent-gold: #fbbf24; }
        [dir="ltr"] { --main-font: 'Poppins', sans-serif; }
        body { font-family: var(--main-font); background: #f8fafc; min-height: 100vh; user-select: none; }
        
        .profile-container { background: white; border-radius: 3rem; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.1); width: 100%; max-width: 500px; overflow: hidden; position: relative; margin: 20px auto; border: 1px solid #f1f5f9; }
        
        .profile-img-box { width: 100%; height: 500px; position: relative; overflow: hidden; background: #1e293b; }
        .profile-img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1); }
        .blur-effect { filter: blur(40px); transform: scale(1.1); }
        
        .seriousness-bar { position: absolute; bottom: 100px; left: 20px; right: 20px; height: 6px; background: rgba(255,255,255,0.2); border-radius: 10px; z-index: 20; }
        .seriousness-fill { height: 100%; background: var(--accent-gold); border-radius: 10px; transition: 1s ease-out; }

        .glass-nav { position: absolute; top: 25px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 20px; z-index: 50; }
        .icon-btn { background: rgba(0,0,0,0.3); color: white; width: 45px; height: 45px; border-radius: 1.2rem; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        
        .profile-header-info { background: linear-gradient(to top, white 30%, rgba(255,255,255,0.8) 60%, transparent); position: absolute; bottom: 0; width: 100%; padding: 40px 25px 20px; }
        
        .tab-btn { @apply flex-1 py-3 text-xs font-black text-slate-400 border-b-2 border-transparent transition-all; }
        .tab-btn.active { @apply text-green-700 border-green-700; }
        
        .info-pill { background: #ffffff; border: 1px solid #f1f5f9; border-radius: 1.5rem; padding: 12px; text-align: center; transition: 0.3s; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.02); }
        
        .rose-anim { position: absolute; font-size: 2.5rem; animation: floatRose 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; z-index: 60; pointer-events: none; }
        @keyframes floatRose { 0% { transform: translateY(0) rotate(0); opacity: 1; } 100% { transform: translateY(-300px) rotate(45deg); opacity: 0; } }
        
        .verified-badge { color: #3b82f6; font-size: 1.2rem; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="profile-container">
        <div class="glass-nav">
            <button onclick="goBack()" class="icon-btn hover:bg-green-600 transition"><i class="fas fa-arrow-right" id="backIcon"></i></button>
            <button onclick="shareProfile()" class="icon-btn hover:bg-blue-600"><i class="fas fa-share-alt"></i></button>
        </div>

        <div class="profile-img-box">
            <div id="vipBadge" class="hidden absolute top-24 right-5 bg-gradient-to-r from-amber-400 to-yellow-600 text-white px-4 py-1.5 rounded-full text-[9px] font-black z-10 shadow-2xl border border-white/20">
                <i class="fas fa-crown mr-1"></i> Ø¹Ø¶ÙˆÙŠÙ€Ø© Ù…Ù…ÙŠØ²Ø©
            </div>
            
            <div class="seriousness-bar">
                <div class="seriousness-fill" id="seriousnessFill" style="width: 0%"></div>
                <span class="absolute -top-5 right-0 text-[9px] font-black text-white/80">Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ©: <span id="seriousnessVal">0</span>%</span>
            </div>

            <img id="profileImage" src="" class="blur-effect" onerror="this.src='https://ui-avatars.com/api/?background=random&name=User'">
            
            <div class="profile-header-info">
                <div class="flex items-center gap-2 mb-1">
                    <h2 id="profileName" class="text-3xl font-black text-slate-800 tracking-tighter">...</h2>
                    <i id="verifiedIcon" class="fas fa-check-circle verified-badge hidden" title="Ù…ÙˆØ«Ù‚"></i>
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <p id="profileLocation" class="text-slate-500 font-bold text-xs">...</p>
                </div>
            </div>
        </div>

        <div class="flex border-b border-slate-100 bg-white sticky top-0 z-30">
            <button onclick="switchTab('about')" id="tabAbout" class="tab-btn active">Ø¹Ù†ÙŠ</button>
            <button onclick="switchTab('specs')" id="tabSpecs" class="tab-btn">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª</button>
        </div>

        <div class="p-6">
            <div id="contentAbout" class="tab-content">
                <div class="grid grid-cols-3 gap-2 mb-6">
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold">Ø§Ù„Ø¹Ù…Ø±</p><b id="pAge" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold">Ø§Ù„Ø­Ø§Ù„Ø©</p><b id="pStatus" class="text-slate-700 text-xs">-</b></div>
                    <div class="info-pill"><p class="text-[9px] text-slate-400 font-bold">Ø§Ù„Ù…Ù‡Ù†Ø©</p><b id="pJob" class="text-slate-700 text-xs truncate block">-</b></div>
                </div>
            </div>

            <div id="contentSpecs" class="tab-content hidden">
                <div class="bg-amber-50 p-5 rounded-3xl border border-amber-100 mb-6">
                    <h4 class="font-black text-amber-800 mb-2 flex items-center gap-2 text-xs">
                        <i class="fas fa-heart text-red-500"></i>
                        Ù…Ø§ Ø£Ø¨Ø­Ø« Ø¹Ù†Ù‡ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠÙƒ
                    </h4>
                    <p id="pReqs" class="text-amber-900 text-[11px] leading-relaxed font-bold">...</p>
                </div>
            </div>
            
            <div class="flex gap-3 justify-center relative mt-6" id="actionArea">
                <button onclick="dropGift('ğŸŒ¹')" class="bg-rose-50 text-rose-600 w-16 h-16 rounded-[1.8rem] text-2xl hover:bg-rose-100 transition shadow-sm active:scale-90 flex items-center justify-center border border-rose-100">
                    <i class="fas fa-heart"></i>
                </button>
                <button onclick="openChat()" class="flex-grow bg-green-700 text-white font-black rounded-[1.8rem] shadow-xl hover:bg-green-800 transition active:scale-95 flex items-center justify-center gap-3 text-sm">
                    Ø¥Ø¨Ø¯Ø§Ø¡ Ø§Ù‡ØªÙ…Ø§Ù… ğŸ“©
                </button>
            </div>
        </div>

        <p class="text-center text-[9px] text-slate-400 pb-8 font-bold">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ«Ù‚Ø© ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© ÙˆÙÙ‚ Ø´Ø±ÙˆØ· Ø§Ù„Ø³ØªØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ÙŠØ© ğŸ‡¸ğŸ‡©</p>
    </div>

    <div id="chatBox" class="hidden fixed inset-0 bg-slate-900/90 backdrop-blur-md z-[100] flex items-center justify-center p-6">
        <!-- Chat box content remains the same -->
    </div>

    <script>
        // --- GLOBAL STATE & CONFIG ---
        let profileData = {};

        // --- INITIALIZATION ---
        window.onload = function() {
            // 1. Authentication & Data Check
            const token = localStorage.getItem('naseeb_token');
            const dataString = sessionStorage.getItem('currentProfile');

            if (!token || !dataString) {
                // If no token or no profile data, redirect to login
                window.location.href = 'login.html';
                return;
            }

            profileData = JSON.parse(dataString);
            
            // 2. Render all data
            renderProfile();
        };

        // --- RENDERING FUNCTIONS ---
        function renderProfile() {
            // Set page title
            document.title = `${profileData.name} | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ`;

            // Render basic info
            document.getElementById('profileName').innerText = profileData.name || '...';
            document.getElementById('profileLocation').innerText = profileData.city || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            document.getElementById('pAge').innerText = profileData.age || '-';
            document.getElementById('pStatus').innerText = profileData.status || '-';
            document.getElementById('pJob').innerText = profileData.job || '-';
            document.getElementById('pReqs').innerText = profileData.reqs || 'Ø£Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙŠÙƒ ÙŠÙ‚Ø¯Ø± Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø²ÙˆØ¬ÙŠØ© ÙˆØ§Ù„Ø³ØªØ±.';

            // Render profile image with privacy logic
            const profileImage = document.getElementById('profileImage');
            profileImage.src = profileData.profileImageUrl || `https://ui-avatars.com/api/?name=${profileData.name}&background=random`;
            
            const userPlan = localStorage.getItem('naseeb_user_plan') || 'free';
            const isPaidUser = /sutra|gold|diamond/i.test(userPlan);
            
            if (isPaidUser) {
                profileImage.classList.remove('blur-effect');
            } else {
                profileImage.classList.add('blur-effect');
            }

            // Show verification and plan badges
            if (profileData.isVerified) {
                document.getElementById('verifiedIcon').classList.remove('hidden');
            }
            if (profileData.plan && /gold|diamond/i.test(profileData.plan)) {
                document.getElementById('vipBadge').classList.remove('hidden');
            }

            // Animate seriousness bar
            setTimeout(() => {
                const score = calculateSeriousness();
                document.getElementById('seriousnessFill').style.width = score + '%';
                document.getElementById('seriousnessVal').innerText = score;
            }, 500);
        }

        function calculateSeriousness() {
            let score = 50; // Base score for being on the platform
            if (profileData.profileImageUrl) score += 20;
            if (profileData.reqs) score += 15;
            if (profileData.job) score += 15;
            return Math.min(score, 100); // Ensure score doesn't exceed 100
        }

        // --- UI INTERACTION FUNCTIONS ---
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            
            const tabId = 'tab' + tab.charAt(0).toUpperCase() + tab.slice(1);
            const contentId = 'content' + tab.charAt(0).toUpperCase() + tab.slice(1);
            
            document.getElementById(tabId).classList.add('active');
            document.getElementById(contentId).classList.remove('hidden');
        }

        function dropGift(emoji) {
            const gift = document.createElement('div');
            gift.className = 'rose-anim';
            gift.innerHTML = emoji; 
            gift.style.left = (Math.random() * 60 + 20) + "%";
            document.getElementById('actionArea').appendChild(gift);
            setTimeout(() => gift.remove(), 2500);
        }

        function shareProfile() {
            if (navigator.share) {
                navigator.share({
                    title: `Ù…Ù„Ù ${profileData.name} Ø¹Ù„Ù‰ Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ`,
                    text: `Ø´Ø§Ù‡Ø¯ Ù…Ù„Ù ${profileData.name} Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Ù†ØµÙŠØ¨ Ù„Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø¬Ø§Ø¯.`,
                    url: window.location.href
                });
            }
        }

        function goBack() {
            window.location.href = 'members.html';
        }

        function openChat() {
            // In a real app, this would open a chat window.
            // For now, we can link to WhatsApp with a pre-filled message.
            const myName = localStorage.getItem('naseeb_user_name') || 'Ø¹Ø¶Ùˆ';
            const message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${profileData.name}ØŒ Ø£Ù†Ø§ ${myName} Ù…Ù† Ù…Ù†ØµØ© Ù†ØµÙŠØ¨. Ø£ÙˆØ¯ Ø¥Ø¨Ø¯Ø§Ø¡ Ø§Ù‡ØªÙ…Ø§Ù…ÙŠ Ø¨Ø§Ù„ØªØ¹Ø±Ù Ø¨ØºØ±Ø¶ Ø§Ù„Ø²ÙˆØ§Ø¬.`;
            window.open(`https://wa.me/${profileData.phone}?text=${encodeURIComponent(message)}`, '_blank');
        }

    </script>
</body>
</html>
    
