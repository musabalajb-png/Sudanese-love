<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØµÙØ­ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ - Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body { font-family: 'Cairo', sans-serif; }
        .member-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .member-card:hover { transform: translateY(-10px); }
        .blur-image { filter: blur(15px); transition: filter 0.5s; }
        .vip-badge { background: linear-gradient(45deg, #ffd700, #ffa500); }
    </style>
</head>
<body class="bg-gray-50">

    <nav class="bg-white/80 backdrop-blur-md shadow-sm p-4 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="text-2xl font-bold text-green-700">ğŸ’ Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</div>
            <div class="flex items-center gap-4">
                <span id="userStatus" class="hidden md:block text-xs bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full font-bold">Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</span>
                <a href="index.html" class="text-gray-500 font-bold px-2">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            </div>
        </div>
    </nav>

    <header class="bg-white border-b p-6 shadow-sm">
        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <input type="text" id="nameSearch" onkeyup="filterMembers()" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…..." class="border p-3 rounded-2xl outline-none focus:ring-2 focus:ring-green-500">
                <select id="filterGender" onchange="filterMembers()" class="border p-3 rounded-2xl outline-none">
                    <option value="all">Ø§Ù„ÙƒÙ„</option>
                    <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                    <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                </select>
                <select id="filterCity" onchange="filterMembers()" class="border p-3 rounded-2xl outline-none">
                    <option value="all">ÙƒÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…</option>
                    <option value="Ø§Ù„Ø³ÙˆØ¯Ø§Ù†">Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</option>
                    <option value="Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
                    <option value="Ø£ÙˆØ±ÙˆØ¨Ø§">Ø£ÙˆØ±ÙˆØ¨Ø§</option>
                </select>
                <button onclick="resetFilters()" class="bg-gray-100 text-gray-600 font-bold rounded-2xl py-3 hover:bg-gray-200">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto py-10 px-4">
        <div id="loading" class="text-center py-20 text-gray-400 font-bold italic animate-pulse">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚ÙŠÙ† Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹...</div>
        <div id="membersList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
        <div id="noResults" class="hidden text-center py-20 text-gray-400 font-bold text-xl">Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ</div>
    </main>

    <script>
        let allMembers = [];
        const dbURL = "https://naseeb-project-1030a-default-rtdb.asia-southeast1.firebasedatabase.app/members.json";

        async function loadMembers() {
            try {
                const response = await fetch(dbURL);
                const data = await response.json();
                document.getElementById('loading').classList.add('hidden');
                if (data) {
                    allMembers = data.name ? [data] : Object.keys(data).map(key => ({ id: key, ...data[key] }));
                    displayMembers(allMembers);
                }
            } catch (error) { console.error("Error:", error); }
        }

        function displayMembers(data) {
            const list = document.getElementById('membersList');
            list.innerHTML = "";
            data.forEach(m => {
                const card = `
                    <div class="member-card bg-white rounded-[2.5rem] shadow-sm border border-gray-100 overflow-hidden">
                        <div class="h-64 relative overflow-hidden group">
                            <img src="${m.image || 'https://via.placeholder.com/400x500'}" class="w-full h-full object-cover blur-image">
                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center">
                                <span class="text-white text-[10px] border border-white/30 px-3 py-1 rounded-full backdrop-blur-md">ğŸ”’ ØµÙˆØ±Ø© Ø®Ø§ØµØ©</span>
                            </div>
                            ${m.verified ? '<span class="absolute top-4 right-4 bg-blue-500 text-white text-[10px] px-3 py-1 rounded-full font-bold">âœ“ Ù…ÙˆØ«Ù‚</span>' : ''}
                        </div>
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-xl text-gray-800">${m.name}</h3>
                                <span class="bg-green-50 text-green-700 text-xs px-2 py-1 rounded-lg font-bold">${m.age} Ø³Ù†Ø©</span>
                            </div>
                            <p class="text-gray-500 text-xs mb-4">ğŸ“ ${m.city} | ğŸ’ ${m.status}</p>
                            
                            <div class="grid grid-cols-2 gap-2 mb-3">
                                <button onclick="handleChat('${m.name}', 'Ø¨ÙŠØ§Ù†Ø§ØªÙƒ')" class="bg-blue-50 text-blue-600 text-[10px] py-2 rounded-xl font-bold hover:bg-blue-100 transition">ğŸ“„ Ø£Ø¹Ø¬Ø¨ØªÙ†ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                                <button onclick="handleChat('${m.name}', 'ØµÙˆØ±ØªÙƒ')" class="bg-pink-50 text-pink-600 text-[10px] py-2 rounded-xl font-bold hover:bg-pink-100 transition">ğŸ“¸ Ø£Ø¹Ø¬Ø¨ØªÙ†ÙŠ Ø§Ù„ØµÙˆØ±Ø©</button>
                            </div>

                            <div class="flex gap-2">
                                <button onclick="sendGift('${m.name}')" class="flex-1 border border-red-100 text-red-500 py-3 rounded-xl text-xs font-bold hover:bg-red-50 transition">â¤ï¸ Ø¥Ø±Ø³Ø§Ù„ Ù†Ø¨Ø¶</button>
                                <button onclick="startVideoCall('${m.name}')" class="bg-green-700 text-white px-4 py-3 rounded-xl hover:bg-green-800 transition shadow-md">ğŸ¥</button>
                            </div>
                        </div>
                    </div>
                `;
                list.innerHTML += card;
            });
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Øª Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯ ÙˆÙ…Ù†Ø¹ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
        function handleChat(name, type) {
            const lastSent = localStorage.getItem('lastMsgDate');
            const today = new Date().toLocaleDateString();

            if(lastSent === today) {
                alert("ÙŠØ§ Ù…Ø¯ÙŠØ±ØŒ ÙˆØµÙ„Øª Ù„Ù„Ø­Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ (Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹). Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ù„ÙØªØ­ Ø§Ù„Ø´Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„!");
                return;
            }

            let msg = prompt(`Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØªØ±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø±Ù…Ø¬Ø© Ù„Ù€ ${name}: "Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø¹Ø¬Ø¨ØªÙ†ÙŠ ${type}". \n\n* ØªÙ†Ø¨ÙŠÙ‡: ÙŠÙ…Ù†Ø¹ Ù…Ù†Ø¹Ø§Ù‹ Ø¨Ø§ØªØ§Ù‹ Ø¥Ø±Ø³Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„Ø§ØªØŒ Ø³ÙŠØªÙ… Ø­Ø¸Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ø­Ø§Ù„ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©.`);
            
            // ÙƒØ§Ø´Ù Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¨Ø³ÙŠØ·
            if(msg && /[0-9]{7,}/.test(msg)) {
                alert("âš ï¸ Ø®Ø·Ø£ Ø£Ù…Ù†ÙŠ: Ù…Ù…Ù†ÙˆØ¹ Ø¥Ø±Ø³Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡ÙˆØ§ØªÙ. Ø§Ù„ØªÙˆØ§ØµÙ„ ÙŠØªÙ… Ø¹Ø¨Ø± Ø§Ù„Ù…Ù†ØµØ© ÙÙ‚Ø· Ù„Ø¶Ù…Ø§Ù† Ø®ØµÙˆØµÙŠØªÙƒ.");
                return;
            }

            if(msg !== null) {
                alert(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù‡ØªÙ…Ø§Ù… Ù„Ù€ ${name}. Ø³ÙŠØµÙ„Ùƒ Ø§Ù„Ø±Ø¯ ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯ Ø­Ø§Ù„ Ø§Ù„ØªÙˆØ§ÙÙ‚.`);
                localStorage.setItem('lastMsgDate', today);
            }
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ (10 Ù…Ø¬Ø§Ù†ÙŠØ©)
        let gifts = parseInt(localStorage.getItem('giftsCount') || 0);
        function sendGift(name) {
            if(gifts >= 10) {
                alert("Ø§Ù†ØªÙ‡Ù‰ Ø±ØµÙŠØ¯ Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© (10). Ø§Ø´ØªØ±Ùƒ Ù„Ø¯Ø¹Ù… Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒ Ø¨Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§!");
                return;
            }
            gifts++;
            localStorage.setItem('giftsCount', gifts);
            alert(`Ø£Ø±Ø³Ù„Øª â¤ï¸ Ù„Ù€ ${name}. Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${10 - gifts}`);
        }

        // Ù†Ø¸Ø§Ù… Ø§ØªØµØ§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (Ù„Ù„Ù…ØªÙˆØ§ÙÙ‚ÙŠÙ† ÙÙ‚Ø·)
        function startVideoCall(name) {
            const isVip = false; // Ù‡Ù†Ø§ Ù†Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹ Ù„Ø§Ø­Ù‚Ø§Ù‹
            if(!isVip) {
                alert(`ğŸ¥ Ù…ÙŠØ²Ø© Ø§ØªØµØ§Ù„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø´ÙØ± Ù…Ø¹ ${name} Ù…ØªØ§Ø­Ø© ÙÙ‚Ø· Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø§Ø³ÙŠØ©. \n\nØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„ØªØ±Ù‚ÙŠØ©.`);
                return;
            }
            alert("Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§ØªØµØ§Ù„ ÙÙŠØ¯ÙŠÙˆ Ø¢Ù…Ù† ÙˆÙ…Ø­Ù…ÙŠ...");
        }

        function filterMembers() {
            const name = document.getElementById('nameSearch').value.toLowerCase();
            const gender = document.getElementById('filterGender').value;
            const city = document.getElementById('filterCity').value;
            const filtered = allMembers.filter(m => (gender === 'all' || m.gender === gender) && (city === 'all' || m.city.includes(city)) && m.name.toLowerCase().includes(name));
            displayMembers(filtered);
        }

        function resetFilters() {
            document.getElementById('nameSearch').value = "";
            document.getElementById('filterGender').value = "all";
            document.getElementById('filterCity').value = "all";
            displayMembers(allMembers);
        }

        window.onload = loadMembers;
    </script>
</body>
</html>
