<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØµÙØ­ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ - Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #f8fafc; }
        .member-card { transition: all 0.4s ease; border-radius: 2rem; overflow: hidden; background: white; border: 1px solid #f1f5f9; }
        .member-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px -15px rgba(0,0,0,0.1); }
        .blur-image { filter: blur(25px); transform: scale(1.2); transition: 0.5s; }
        .unblur { filter: blur(0) !important; transform: scale(1) !important; }
        .badge-premium { background: linear-gradient(45deg, #fbbf24, #f59e0b); color: white; }
        .badge-diamond { background: linear-gradient(45deg, #06b6d4, #3b82f6); color: white; }
        .badge-standard { background: #f3f4f6; color: #64748b; }
        .modal { display: none; position: fixed; z-index: 100; inset: 0; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
        .modal.active { display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="min-h-screen">

    <div id="loginModal" class="modal p-4">
        <div class="bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl">
            <div class="text-center mb-6">
                <div class="text-4xl mb-2">ğŸ”</div>
                <h2 class="text-2xl font-bold text-slate-800">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†</h2>
                <p class="text-sm text-gray-500 text-center">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„ØªØªÙ…ÙƒÙ† Ù…Ù† Ø±Ø¤ÙŠØ© Ø§Ù„ØµÙˆØ± ÙˆØ§Ù„ØªÙˆØ§ØµÙ„</p>
            </div>
            <div class="space-y-4">
                <input type="text" id="loginUser" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±" class="w-full p-4 bg-gray-50 rounded-2xl border-none text-right">
                <input type="password" id="loginPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" class="w-full p-4 bg-gray-50 rounded-2xl border-none text-right">
                <button onclick="checkLogin()" class="w-full bg-green-600 text-white font-bold py-4 rounded-2xl shadow-lg hover:bg-green-700">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†</button>
                <button onclick="toggleLoginModal()" class="w-full text-gray-400 text-sm font-bold">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©</button>
            </div>
        </div>
    </div>

    <nav class="bg-white/90 backdrop-blur-md shadow-sm p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center px-4">
            <div class="flex items-center gap-2">
                <span class="text-2xl">ğŸ’</span>
                <span class="font-bold text-green-700 text-xl">Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</span>
            </div>
            <div class="flex gap-3">
                <div id="userInfo" class="hidden flex items-center gap-2 bg-green-50 px-3 py-1 rounded-full border border-green-100">
                    <span id="userNameDisplay" class="text-xs font-bold text-green-700"></span>
                    <button onclick="logout()" class="text-[10px] bg-red-100 text-red-600 px-2 py-1 rounded-md">Ø®Ø±ÙˆØ¬</button>
                </div>
                <button id="loginHeaderBtn" onclick="toggleLoginModal()" class="bg-green-600 text-white px-5 py-2 rounded-full text-xs font-bold transition">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                <a href="index.html" class="bg-slate-100 text-slate-600 px-5 py-2 rounded-full text-xs font-bold transition">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            </div>
        </div>
    </nav>

    <header class="bg-white border-b border-gray-100 py-8 text-center">
        <div class="container mx-auto px-6">
            <h1 class="text-2xl font-bold text-slate-800 mb-2">Ø§Ø³ØªÙƒØ´Ù Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒ</h1>
            <p class="text-gray-500 text-sm mb-6">ÙŠÙˆØ¬Ø¯ Ù„Ø¯ÙŠÙ†Ø§ Ø§Ù„Ø¢Ù† <span id="memberCount" class="text-green-600 font-bold">...</span> Ù…Ø´ØªØ±Ùƒ Ù…ÙˆØ«Ù‚</p>
            <div class="max-w-4xl mx-auto">
                <input type="text" id="nameSearch" onkeyup="filterMembers()" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©ØŒ Ø£Ùˆ Ø§Ù„Ù…Ù‡Ù†Ø©..." class="w-full border-2 border-gray-50 bg-gray-50 p-4 pr-12 rounded-3xl outline-none focus:border-green-500 transition shadow-sm">
            </div>
        </div>
    </header>

    <main class="container mx-auto py-12 px-6">
        <div id="loading" class="text-center py-20">
            <div class="animate-spin rounded-full h-12 w-12 border-4 border-green-700 border-t-transparent mx-auto"></div>
            <p class="mt-4 text-slate-500 font-bold">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†...</p>
        </div>
        <div id="membersList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"></div>
    </main>

    <script>
        const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRHsoqVm7cDIUgGw6u5n0yO8U19lyqKLrrskUn6Q7At1Q04hrXdC7HxojsDnxj7Frld2__eJOBBMEX6/pub?output=csv";
        let allMembers = [];
        let isLoggedIn = localStorage.getItem('naseeb_logged') === 'true';
        let loggedUserPlan = (localStorage.getItem('userPlan') || 'Ù…Ø¬Ø§Ù†ÙŠØ©').trim();

        async function loadMembers() {
            try {
                const response = await fetch(sheetURL);
                const data = await response.text();
                const rows = data.split('\n').slice(1); 
                document.getElementById('loading').style.display = 'none';
                document.getElementById('memberCount').innerText = rows.length;
                
                const list = document.getElementById('membersList');
                list.innerHTML = "";
                
                rows.forEach((row) => {
                    const cols = row.split(',').map(c => c.replace(/"/g, '').trim());
                    if(cols.length < 5) return;

                    const member = { name: cols[0], age: cols[1], gender: cols[2], job: cols[3], city: cols[4], plan: cols[5] || 'Ø¹Ø§Ø¯ÙŠØ©', img: cols[6], status: cols[7], isVerified: cols[8], password: cols[9] };
                    allMembers.push(member);

                    let planClass = member.plan.includes("Ù…Ø§Ø³ÙŠØ©") ? "badge-diamond" : (member.plan.includes("Ø°Ù‡Ø¨ÙŠØ©") || member.plan.includes("Ø§Ù„Ø³ØªØ±") ? "badge-premium" : "badge-standard");
                    const isPaid = /Ø§Ù„Ø³ØªØ±|Ø°Ù‡Ø¨ÙŠØ©|Ù…Ø§Ø³ÙŠØ©|VIP/i.test(loggedUserPlan);
                    const canSeePhotos = isLoggedIn && isPaid;

                    list.innerHTML += `
                        <div class="member-card" data-gender="${member.gender}">
                            <div class="h-72 relative overflow-hidden">
                                <img src="${member.img}" onerror="this.src='https://ui-avatars.com/api/?name=${member.name}&background=random'" class="w-full h-full object-cover ${canSeePhotos ? 'unblur' : 'blur-image'}">
                                ${!canSeePhotos ? '<div class="absolute inset-0 bg-black/40 flex items-center justify-center p-4 text-white text-[10px] font-bold">Ø§Ø´ØªØ±Ùƒ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØµÙˆØ±Ø© ğŸ”’</div>' : ''}
                                <div class="absolute top-4 left-4 ${planClass} px-3 py-1 rounded-full text-[10px] font-bold shadow-md">${member.plan}</div>
                            </div>
                            <div class="p-6">
                                <h3 class="font-bold text-lg text-slate-800">${member.name} ${member.isVerified === 'Ù†Ø¹Ù…' ? '<span class="text-green-500">âœ”</span>' : ''}</h3>
                                <p class="text-slate-500 text-xs mb-4">${member.age} Ø³Ù†Ø© | ${member.status} | ${member.city}</p>
                                <button onclick="handleContact('${member.name}')" class="w-full bg-green-600 text-white font-bold py-3 rounded-2xl hover:bg-green-700 transition active:scale-95">ğŸ’ ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¢Ù†</button>
                            </div>
                        </div>`;
                });
                updateUI();
            } catch (e) { console.error("Error:", e); }
        }

        function checkLogin() {
            const user = document.getElementById('loginUser').value.trim();
            const pass = document.getElementById('loginPass').value.trim();
            if(!user || !pass) return alert('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âš ï¸');
            const found = allMembers.find(m => m.name === user && m.password === pass);
            if(found) {
                localStorage.setItem('naseeb_logged', 'true');
                localStorage.setItem('userName', found.name);
                localStorage.setItem('userPlan', found.plan);
                location.reload();
            } else { alert('Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø© âŒ'); }
        }

        function handleContact(target) {
            if(!isLoggedIn) return toggleLoginModal();
            const myName = localStorage.getItem('userName');
            const msg = `Ø£Ù†Ø§ Ø§Ù„Ù…Ø´ØªØ±Ùƒ (${myName}) Ù…Ù‡ØªÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ (${target}).`;
            window.open(`https://wa.me/249127910778?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function updateUI() {
            if(isLoggedIn) {
                document.getElementById('loginHeaderBtn').classList.add('hidden');
                document.getElementById('userInfo').classList.remove('hidden');
                document.getElementById('userNameDisplay').innerText = localStorage.getItem('userName');
            }
        }
        function toggleLoginModal() { document.getElementById('loginModal').classList.toggle('active'); }
        function logout() { localStorage.clear(); location.reload(); }
        function filterMembers() {
            const q = document.getElementById('nameSearch').value.toLowerCase();
            document.querySelectorAll('.member-card').forEach(c => {
                c.style.display = c.innerText.toLowerCase().includes(q) ? "block" : "none";
            });
        }
        window.onload = loadMembers;
    </script>
</body>
</html>
