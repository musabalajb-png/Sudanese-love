<!DOCTYPE html>
<html lang="ar" dir="rtl" id="mainHtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title id="pageTitle">Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #065f46; --accent: #d97706; --bg-light: #f0fdf4; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg-light); min-height: 100vh; transition: 0.3s; -webkit-tap-highlight-color: transparent; }
        [dir="ltr"] { font-family: 'Poppins', sans-serif; }
        
        /* Ù…Ù†Ø¹ ØªØµÙˆÙŠØ± Ø£Ùˆ Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ù„Ù„Ø®ØµÙˆØµÙŠØ© */
        img { pointer-events: none; user-select: none; -webkit-user-drag: none; }

        .step-content { display: none; animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .step-content.active { display: block; }
        @keyframes slideIn { from { transform: translateX(30px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        .progress-dot { width: 12px; height: 12px; border-radius: 50%; background: #d1d5db; transition: 0.4s; position: relative; }
        .progress-dot.active { background: var(--primary); transform: scale(1.4); box-shadow: 0 0 15px rgba(6, 95, 70, 0.3); }
        
        /* Ù‚ÙˆØ© ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù…Ø­Ø³Ù†Ø© */
        #passStrength { height: 6px; border-radius: 10px; transition: 0.5s; width: 0%; margin-top: 8px; background: #e2e8f0; }
        
        .live-preview-card { background: white; border-radius: 2.5rem; overflow: hidden; box-shadow: 0 30px 60px -12px rgba(0,0,0,0.15); border: 1px solid rgba(255,255,255,0.8); transition: 0.4s transform; }
        .live-preview-card:hover { transform: translateY(-5px); }

        #termsModal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 1000; align-items: center; justify-content: center; backdrop-filter: blur(12px); }
        #termsModal.active { display: flex; }

        .otp-input { width: 50px; height: 60px; text-align: center; font-size: 1.5rem; font-weight: 800; border-radius: 15px; border: 2px solid #e2e8f0; background: #fff; transition: 0.3s; }
        .otp-input:focus { border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); outline: none; }

        .glass-btn { background: rgba(255,255,255,0.9); backdrop-filter: blur(5px); border: 1px solid #e2e8f0; }
        
        /* ØªØ­Ø³ÙŠÙ† Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¨Ù†Ùƒ */
        #bank { border: 2px dashed rgba(251, 191, 36, 0.3); }
    </style>
</head>
<body class="p-4 md:p-8">

    <button onclick="toggleLang()" class="fixed top-5 left-5 z-[100] glass-btn px-5 py-2 rounded-full font-black text-xs shadow-lg flex items-center gap-2 hover:bg-emerald-800 hover:text-white transition-all active:scale-90">
        <i class="fas fa-globe"></i>
        <span id="langLabel">English</span>
    </button>

    <div id="termsModal">
        <div class="bg-white w-full max-w-lg rounded-[3rem] p-10 shadow-2xl overflow-y-auto max-h-[90vh] mx-4 border-t-[12px] border-emerald-900">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-emerald-50 text-emerald-800 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl shadow-inner"><i class="fas fa-hand-holding-heart"></i></div>
                <h3 class="text-2xl font-black text-slate-800" data-ar="Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ØºÙ„ÙŠØ¸ ÙˆØ§Ù„Ø³ØªØ± ğŸ’" data-en="The Covenant of Honor ğŸ’">Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„ØºÙ„ÙŠØ¸ ÙˆØ§Ù„Ø³ØªØ± ğŸ’</h3>
            </div>
            <div id="termsContent" class="text-sm text-slate-600 space-y-5 leading-relaxed font-bold"></div>
            <button onclick="document.getElementById('termsModal').classList.remove('active')" class="w-full mt-10 bg-emerald-800 text-white py-5 rounded-2xl font-black shadow-xl hover:bg-emerald-900 transition-all active:scale-95" data-ar="Ø£Ù‚Ø³Ù…Øª Ø¨Ø§Ù„Ù„Ù‡.. Ù…ÙˆØ§ÙÙ‚ âœ…" data-en="I Swear.. I Agree âœ…">Ø£Ù‚Ø³Ù…Øª Ø¨Ø§Ù„Ù„Ù‡.. Ù…ÙˆØ§ÙÙ‚ âœ…</button>
        </div>
    </div>

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12 items-start mt-12">
        
        <div class="hidden lg:block sticky top-10">
            <p class="text-emerald-800 font-black mb-6 text-center text-sm animate-pulse" data-ar="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„Ùƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ ğŸ¤³" data-en="Global Profile Preview ğŸ¤³">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø¨Ø±ÙˆÙØ§ÙŠÙ„Ùƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ ğŸ¤³</p>
            <div class="live-preview-card">
                <div class="relative h-[450px] bg-slate-100 overflow-hidden">
                    <img id="previewImg" src="https://ui-avatars.com/api/?name=User&background=065f46&color=fff" class="w-full h-full object-cover blur-[35px] transition-all duration-1000">
                    <div class="absolute inset-0 bg-gradient-to-t from-emerald-950 via-transparent to-transparent"></div>
                    <div class="absolute bottom-0 w-full p-8 text-white">
                        <div class="flex items-center gap-2 mb-2">
                            <h3 id="previewName" class="text-3xl font-black">...</h3>
                            <i class="fas fa-check-circle text-blue-400 text-lg shadow-sm"></i>
                        </div>
                        <p id="previewCity" class="text-sm font-bold text-emerald-100 opacity-80">...</p>
                    </div>
                </div>
                <div class="p-8 grid grid-cols-3 gap-4 bg-white">
                    <div class="bg-emerald-50 p-4 rounded-2xl text-center shadow-sm"><p class="text-[10px] text-emerald-600 font-black mb-1" data-ar="Ø§Ù„Ø¹Ù…Ø±" data-en="Age">Ø§Ù„Ø¹Ù…Ø±</p><b id="previewAge" class="text-sm text-emerald-900">-</b></div>
                    <div class="bg-emerald-50 p-4 rounded-2xl text-center shadow-sm"><p class="text-[10px] text-emerald-600 font-black mb-1" data-ar="Ø§Ù„Ù…Ù‡Ù†Ø©" data-en="Job">Ø§Ù„Ù…Ù‡Ù†Ø©</p><b id="previewJob" class="text-sm text-emerald-900 truncate block">-</b></div>
                    <div class="bg-emerald-50 p-4 rounded-2xl text-center shadow-sm"><p class="text-[10px] text-emerald-600 font-black mb-1" data-ar="Ø§Ù„Ø­Ø§Ù„Ø©" data-en="Status">Ø§Ù„Ø­Ø§Ù„Ø©</p><b id="previewStatus" class="text-sm text-emerald-900">-</b></div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-[3.5rem] shadow-2xl p-8 md:p-12 border border-emerald-100/50 relative overflow-hidden">
            
            <div class="flex justify-between items-center mb-12 px-2">
                <div class="progress-dot active" id="dot1"></div>
                <div class="h-1 flex-1 bg-slate-100 mx-3 rounded-full"><div id="line1" class="h-full bg-emerald-600 transition-all duration-700 w-0"></div></div>
                <div class="progress-dot" id="dot2"></div>
                <div class="h-1 flex-1 bg-slate-100 mx-3 rounded-full"><div id="line2" class="h-full bg-emerald-600 transition-all duration-700 w-0"></div></div>
                <div class="progress-dot" id="dot3"></div>
                <div class="h-1 flex-1 bg-slate-100 mx-3 rounded-full"><div id="line3" class="h-full bg-emerald-600 transition-all duration-700 w-0"></div></div>
                <div class="progress-dot" id="dot4"></div>
            </div>

            <form id="regForm" action="https://formspree.io/f/mdandyav" method="POST" class="space-y-6">
                
                <div class="step-content active" id="step1">
                    <h2 class="text-3xl font-black text-slate-800 mb-2" data-ar="Ø£Ù…Ø§Ù† Ø­Ø³Ø§Ø¨Ùƒ ğŸ›¡ï¸" data-en="Account Security ğŸ›¡ï¸">Ø£Ù…Ø§Ù† Ø­Ø³Ø§Ø¨Ùƒ ğŸ›¡ï¸</h2>
                    <p class="text-sm text-slate-400 font-bold mb-8" data-ar="Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„Ø³ØªØ± Ø¨Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©" data-en="Start your journey with full privacy">Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„Ø© Ø§Ù„Ø³ØªØ± Ø¨Ø®ØµÙˆØµÙŠØ© ØªØ§Ù…Ø©</p>
                    
                    <div class="space-y-5">
                        <input type="email" name="email" id="emailInp" required placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" class="w-full p-5 rounded-2xl bg-slate-50 border-2 border-transparent focus:border-emerald-600 outline-none font-bold transition-all">
                        <input type="tel" name="phone" id="phoneInp" required placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full p-5 rounded-2xl bg-slate-50 border-2 border-transparent focus:border-emerald-600 outline-none font-bold transition-all">
                        <div class="relative">
                            <input type="password" name="password" id="passInp" onkeyup="checkPassStrength(this.value)" required placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" class="w-full p-5 rounded-2xl bg-slate-50 border-2 border-transparent focus:border-emerald-600 outline-none font-bold transition-all">
                            <div id="passStrength"></div>
                        </div>
                    </div>
                    <button type="button" onclick="verifyData()" class="w-full mt-10 bg-slate-950 text-white py-6 rounded-2xl font-black shadow-2xl flex items-center justify-center gap-3 transition-transform active:scale-95">
                        <span data-ar="Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©" data-en="Verify & Continue">Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</span>
                        <i class="fas fa-chevron-left ltr:rotate-180"></i>
                    </button>
                </div>

                <div id="otpSection" class="hidden text-center space-y-8 animate-pulse">
                    <h3 class="text-xl font-black text-slate-800" data-ar="Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ğŸ—ï¸" data-en="Enter Verification Code ğŸ—ï¸">Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ ğŸ—ï¸</h3>
                    <div class="flex justify-center gap-3" dir="ltr">
                        <input type="text" maxlength="1" class="otp-input shadow-sm">
                        <input type="text" maxlength="1" class="otp-input shadow-sm">
                        <input type="text" maxlength="1" class="otp-input shadow-sm">
                        <input type="text" maxlength="1" class="otp-input shadow-sm">
                    </div>
                    <button type="button" onclick="nextStep(2)" class="w-full bg-emerald-700 text-white py-5 rounded-2xl font-black shadow-lg" data-ar="ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù…Ø²" data-en="Confirm Code">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù…Ø²</button>
                </div>

                <div class="step-content" id="step2">
                    <h2 class="text-3xl font-black text-slate-800 mb-8" data-ar="Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ğŸ‘¤" data-en="Personal Card ğŸ‘¤">Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ğŸ‘¤</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="text" name="name" id="nameInp" onkeyup="updatePreview(); saveDraft()" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø±" class="p-5 rounded-2xl bg-slate-50 border-none font-bold outline-none focus:ring-2 focus:ring-emerald-600">
                        <input type="text" name="city" id="cityInp" onkeyup="updatePreview(); saveDraft()" required placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©" class="p-5 rounded-2xl bg-slate-50 border-none font-bold outline-none focus:ring-2 focus:ring-emerald-600">
                    </div>
                    <div class="grid grid-cols-2 gap-4 mt-5">
                        <input type="number" name="age" id="ageInp" onkeyup="updatePreview()" required placeholder="Ø§Ù„Ø¹Ù…Ø±" class="p-5 rounded-2xl bg-slate-50 border-none font-bold outline-none focus:ring-2 focus:ring-emerald-600">
                        <select name="status" id="statusInp" onchange="updatePreview()" class="p-5 rounded-2xl bg-slate-50 border-none font-bold font-black outline-none focus:ring-2 focus:ring-emerald-600">
                            <option value="Ø£Ø¹Ø²Ø¨/Ø¢Ù†Ø³Ø©">Ø£Ø¹Ø²Ø¨/Ø¢Ù†Ø³Ø©</option>
                            <option value="Ù…Ø·Ù„Ù‚/Ø©">Ù…Ø·Ù„Ù‚/Ø©</option>
                            <option value="Ø£Ø±Ù…Ù„/Ø©">Ø£Ø±Ù…Ù„/Ø©</option>
                        </select>
                    </div>
                    <input type="text" name="job" id="jobInp" onkeyup="updatePreview()" required placeholder="Ø§Ù„Ù…Ù‡Ù†Ø© / Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø¹Ù…Ù„" class="w-full p-5 mt-5 rounded-2xl bg-slate-50 border-none font-bold outline-none focus:ring-2 focus:ring-emerald-600">
                    <button type="button" onclick="nextStep(3)" class="w-full mt-10 bg-emerald-700 text-white py-6 rounded-2xl font-black shadow-xl" data-ar="Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©" data-en="Next Stage">Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©</button>
                </div>

                <div class="step-content" id="step3">
                    <h2 class="text-3xl font-black text-slate-800 mb-8" data-ar="Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª ÙˆØ§Ù„Ø³ØªØ± ğŸ“" data-en="Specs & Privacy ğŸ“">Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª ÙˆØ§Ù„Ø³ØªØ± ğŸ“</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="number" name="height" placeholder="Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)" class="p-5 rounded-2xl bg-slate-50 border-none font-bold outline-none">
                        <input type="number" name="weight" placeholder="Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)" class="p-5 rounded-2xl bg-slate-50 border-none font-bold outline-none">
                    </div>
                    <textarea name="requirements" placeholder="Ù…Ø§Ø°Ø§ ØªØ·Ù„Ø¨ ÙÙŠ Ø´Ø±ÙŠÙƒ Ø­ÙŠØ§ØªÙƒØŸ" class="w-full h-32 p-5 mt-5 rounded-2xl bg-slate-50 border-none font-bold outline-none resize-none"></textarea>
                    
                    <div class="mt-6 p-6 border-2 border-dashed border-emerald-200 rounded-[2rem] text-center bg-emerald-50/50 group hover:border-emerald-500 transition-all">
                        <p class="text-[10px] font-black text-emerald-700 mb-3" data-ar="Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ (Ø³ØªÙƒÙˆÙ† Ù…Ù…ÙˆÙ‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)" data-en="Upload Photo (Automatically Blurred)">Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ (Ø³ØªÙƒÙˆÙ† Ù…Ù…ÙˆÙ‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)</p>
                        <input type="file" id="pic" accept="image/*" onchange="handleImgPreview(this)" required class="text-xs w-full cursor-pointer">
                    </div>
                    <button type="button" onclick="nextStep(4)" class="w-full mt-10 bg-emerald-700 text-white py-6 rounded-2xl font-black shadow-xl" data-ar="ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©" data-en="Activate Membership">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©</button>
                </div>

                <div class="step-content" id="step4">
                    <h2 class="text-3xl font-black text-slate-800 mb-4" data-ar="ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© ğŸ’" data-en="Activation ğŸ’">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© ğŸ’</h2>
                    <p id="geoNote" class="text-[10px] text-emerald-600 font-bold mb-6">...</p>
                    
                    <select name="plan" id="plan" required class="w-full p-6 rounded-2xl bg-emerald-50 border-2 border-emerald-600 font-black text-emerald-900 shadow-inner">
                        <option value="" disabled selected data-ar="Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³ØªØ±..." data-en="Choose a plan...">Ø§Ø®ØªØ± Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³ØªØ±...</option>
                    </select>
                    
                    <div id="bank" class="hidden mt-8 p-8 bg-slate-900 rounded-[2.5rem] text-white text-center shadow-2xl">
                        <p class="text-[10px] text-slate-400 mb-2" id="paymentMethodLabel" data-ar="Ø­ÙˆÙ„ Ø§Ù„Ø±Ø³ÙˆÙ… Ø¹Ø¨Ø± ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†ÙƒÙƒ" data-en="Transfer via payment app">Ø­ÙˆÙ„ Ø§Ù„Ø±Ø³ÙˆÙ… Ø¹Ø¨Ø± ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†ÙƒÙƒ</p>
                        <p class="text-2xl font-black text-amber-400 select-all tracking-widest" id="accountNum">1705644</p>
                        <p class="text-[10px] text-slate-400 mt-1" data-ar="Ø¨Ø§Ø³Ù…: Ù…ØµØ¹Ø¨ (Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ)" data-en="Name: Musab (Naseeb Global)">Ø¨Ø§Ø³Ù…: Ù…ØµØ¹Ø¨ (Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ)</p>
                        <input type="file" id="receipt" accept="image/*" class="mt-6 block w-full text-[10px] bg-white/10 p-3 rounded-xl">
                    </div>

                    <div class="flex items-start gap-4 mt-8 p-5 bg-amber-50 rounded-2xl border border-amber-100">
                        <input type="checkbox" id="termsCheck" required class="mt-1 w-6 h-6 accent-emerald-700">
                        <label for="termsCheck" class="text-[10px] text-slate-700 font-bold">
                            <span data-ar="Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰" data-en="I agree to">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰</span> 
                            <button type="button" onclick="document.getElementById('termsModal').classList.add('active')" class="text-emerald-700 underline font-black" data-ar="Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„Ø³ØªØ±" data-en="Covenant">Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„Ø³ØªØ±</button> 
                        </label>
                    </div>

                    <button type="button" onclick="startSubmit()" id="btn" class="w-full mt-8 bg-emerald-800 text-white font-black py-6 rounded-2xl shadow-2xl flex items-center justify-center gap-3">
                        <span data-ar="Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚ ğŸš€" data-en="Submit & Verify ğŸš€">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§Ù„ØªÙˆØ«ÙŠÙ‚ ğŸš€</span>
                    </button>
                </div>

                <input type="hidden" name="profile_url" id="p_url">
                <input type="hidden" name="receipt_url" id="r_url">
            </form>
        </div>
    </div>

    <script>
        const IMGBB_API = "ef5f93c776a98bfd2a4ef1d6cdeba6bf";
        let currentLang = 'ar';
        let isInternational = false;

        const termsData = {
            ar: `<p>1. Ø£ØªØ¹Ù‡Ø¯ Ø£Ù…Ø§Ù… Ø§Ù„Ù„Ù‡ Ø£Ù† Ù‡Ø¯ÙÙŠ Ù‡Ùˆ Ø§Ù„Ø²ÙˆØ§Ø¬ Ø§Ù„Ø´Ø±Ø¹ÙŠ ÙÙ‚Ø·.</p><p>2. Ø£Ù„ØªØ²Ù… Ø¨ØµØ¯Ù‚ ÙƒØ§Ù…Ù„ ÙÙŠ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p><p>3. Ø§Ù„ØµÙˆØ± Ø³ØªÙƒÙˆÙ† Ù…Ù…ÙˆÙ‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø®ØµÙˆØµÙŠØ©.</p>`,
            en: `<p>1. I swear my goal is legal marriage only.</p><p>2. I commit to full honesty in all data.</p><p>3. Photos are automatically blurred for privacy.</p>`
        };

        const plans = {
            sudan: [
                { val: "Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³ØªØ±", txt_ar: "Ø¨Ø§Ù‚Ø© Ø§Ù„Ø³ØªØ± (15,000 SDG)", txt_en: "Sutra Plan (15,000 SDG)" },
                { val: "Ø¨Ø§Ù‚Ø© VIP", txt_ar: "Ø¨Ø§Ù‚Ø© VIP Ø§Ù„Ù…Ù„ÙƒÙŠØ© (75,000 SDG)", txt_en: "Royal VIP (75,000 SDG)" }
            ],
            global: [
                { val: "Global Gold", txt_ar: "Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© ($70)", txt_en: "Global Gold ($70)" }
            ]
        };

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø© ---
        function saveDraft() {
            const data = {
                name: document.getElementById('nameInp').value,
                city: document.getElementById('cityInp').value
            };
            localStorage.setItem('naseeb_draft', JSON.stringify(data));
        }

        function loadDraft() {
            const draft = localStorage.getItem('naseeb_draft');
            if(draft) {
                const data = JSON.parse(draft);
                document.getElementById('nameInp').value = data.name || "";
                document.getElementById('cityInp').value = data.city || "";
                updatePreview();
            }
        }

        async function checkLocation() {
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                isInternational = data.country_code !== 'SD';
                document.getElementById('geoNote').innerText = currentLang === 'ar' ? 
                    (isInternational ? "Ù…ÙˆÙ‚Ø¹Ùƒ: Ø¯ÙˆÙ„ÙŠ ğŸŒ" : "Ù…ÙˆÙ‚Ø¹Ùƒ: Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©") : "Location Detected";
                
                if (isInternational) {
                    document.getElementById('accountNum').innerText = "musab_naseeb_paypal";
                }
                renderPlans();
            } catch (e) { 
                isInternational = false; // Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ù„Ùˆ ÙØ´Ù„
                renderPlans(); 
            }
        }

        function toggleLang() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.getElementById('mainHtml').dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            document.getElementById('langLabel').innerText = currentLang === 'ar' ? 'English' : 'Ø¹Ø±Ø¨ÙŠ';
            document.querySelectorAll('[data-ar]').forEach(el => el.innerText = el.getAttribute(`data-${currentLang}`));
            document.getElementById('termsContent').innerHTML = termsData[currentLang];
            renderPlans();
        }

        function checkPassStrength(pass) {
            const bar = document.getElementById('passStrength');
            if (pass.length < 5) { bar.style.width = '30%'; bar.style.background = '#f87171'; }
            else { bar.style.width = '100%'; bar.style.background = '#059669'; }
        }

        function verifyData() {
            if(!document.getElementById('emailInp').value.includes('@')) return alert("Email Error");
            document.getElementById('step1').classList.remove('active');
            document.getElementById('otpSection').classList.remove('hidden');
        }

        function nextStep(n) {
            document.getElementById('otpSection').classList.add('hidden');
            document.querySelectorAll('.step-content').forEach(s => s.classList.remove('active'));
            document.getElementById('step' + n).classList.add('active');
            if(n > 1) document.getElementById('line' + (n-1)).style.width = '100%';
            document.getElementById('dot' + n).classList.add('active');
            window.scrollTo(0, 0);
        }

        function updatePreview() {
            document.getElementById('previewName').innerText = document.getElementById('nameInp').value || "...";
            document.getElementById('previewCity').innerText = document.getElementById('cityInp').value || "...";
            document.getElementById('previewAge').innerText = document.getElementById('ageInp').value || "-";
            document.getElementById('previewJob').innerText = document.getElementById('jobInp').value || "-";
            document.getElementById('previewStatus').innerText = document.getElementById('statusInp').value || "-";
        }

        function handleImgPreview(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = e => {
                    const img = document.getElementById('previewImg');
                    img.src = e.target.result;
                    img.style.filter = "blur(0px)"; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ‡ ÙÙ‚Ø· Ù„Ù„Ù…Ø´ØªØ±Ùƒ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø±ÙØ¹
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function renderPlans() {
            const select = document.getElementById('plan');
            const target = isInternational ? plans.global : plans.sudan;
            select.innerHTML = `<option value="" disabled selected>${currentLang === 'ar' ? "Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø§Ù‚Ø©..." : "Choose Plan..."}</option>`;
            target.forEach(p => {
                const opt = document.createElement('option');
                opt.value = p.val;
                opt.innerText = currentLang === 'ar' ? p.txt_ar : p.txt_en;
                select.appendChild(opt);
            });
        }

        document.getElementById('plan').onchange = () => document.getElementById('bank').style.display = 'block';

        async function upload(file) {
            if(!file) return "";
            const fd = new FormData(); fd.append('image', file);
            const r = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API}`, {method:'POST', body:fd});
            const d = await r.json(); return d.success ? d.data.url : "";
        }

        async function startSubmit() {
            if(!document.getElementById('termsCheck').checked) return alert("Agree to terms");
            const btn = document.getElementById('btn');
            btn.innerText = "..."; btn.disabled = true;

            const p = await upload(document.getElementById('pic').files[0]);
            const r = await upload(document.getElementById('receipt').files[0]);
            document.getElementById('p_url').value = p;
            document.getElementById('r_url').value = r;

            const res = await fetch(document.getElementById('regForm').action, {
                method: 'POST', body: new FormData(document.getElementById('regForm')), headers: {'Accept': 'application/json'}
            });

            if(res.ok) {
                localStorage.clear(); // Ù…Ø³Ø­ Ø§Ù„Ù…Ø³ÙˆØ¯Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­
                alert("Success!");
                window.open(`https://wa.me/249127910778?text=NewRegistration`, '_blank');
                location.href = "members.html";
            }
        }

        window.onload = () => {
            document.getElementById('termsContent').innerHTML = termsData.ar;
            checkLocation();
            loadDraft();
        };
    </script>
</body>
</html>
