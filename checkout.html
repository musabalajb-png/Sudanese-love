<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ | Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
    <meta name="description" content="Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„ØªÙØ¹ÙŠÙ„ Ø¹Ø¶ÙˆÙŠØªÙƒ ÙÙŠ Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ. Ø§ØªØ¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„Ø¨Ø¯Ø¡ Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø­Ù„Ø§Ù„.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    
    <style>
        :root { --primary-green: #16a34a; --bankak-blue: #0072ce; }
        body { 
            font-family: 'Cairo', sans-serif; 
            background: #f8fafc;
            background-image: radial-gradient(#e2e8f0 0.5px, transparent 0.5px);
            background-size: 24px 24px;
            min-height: 100vh; 
            user-select: none; 
        }
        .checkout-card { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px);
            border-radius: 3.5rem; 
            box-shadow: 0 40px 100px -20px rgba(0, 0, 0, 0.15); 
            border: 1px solid white; 
        }
        .animate-float { animation: float 4s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-15px); } }
        
        #copyToast { 
            visibility: hidden; background-color: #1e293b; color: #fff; 
            text-align: center; border-radius: 20px; padding: 16px; position: fixed; 
            z-index: 100; bottom: 40px; left: 50%; transform: translateX(-50%); 
            font-weight: bold; box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        #copyToast.show { visibility: visible; animation: slideUpIn 0.5s forwards, fadeOut 0.5s 2s forwards; }
        
        @keyframes slideUpIn { from { bottom: 0; opacity: 0; } to { bottom: 40px; opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
    </style>
</head>
<body class="py-12 px-4">

    <div class="max-w-xl mx-auto checkout-card overflow-hidden">
        <div class="bg-green-700 p-12 text-white text-center relative">
            <div class="absolute inset-0 opacity-10" style="background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');"></div>
            <div class="text-7xl mb-6 animate-float text-amber-400 drop-shadow-2xl">
                <i class="fas fa-shield-heart"></i>
            </div>
            <h1 class="text-4xl font-black mb-3 tracking-tight">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© ğŸ›¡ï¸</h1>
            <p class="text-green-100 font-bold opacity-90 text-lg italic">Ø®Ø·ÙˆØªÙƒ Ø§Ù„Ø£Ø®ÙŠØ±Ø© Ù†Ø­Ùˆ Ø±Ø­Ù„Ø© Ø§Ù„Ø³ØªØ±</p>
        </div>

        <div class="p-8 md:p-10 space-y-10">
            
            <div class="bg-amber-50 border-2 border-amber-200 p-5 rounded-3xl text-center">
                <p class="text-sm font-bold text-amber-800">Ø£Ù†Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ ØªÙØ¹ÙŠÙ„:</p>
                <h2 id="planTitle" class="text-2xl font-black text-amber-900 mt-1">...</h2>
                <p class="text-lg font-black text-slate-800 mt-2">
                    <span id="planPrice">...</span> <span id="planCurrency">...</span>
                </p>
            </div>

            <div id="payment-instructions">
                <!-- Content is rendered dynamically by JavaScript -->
            </div>

            <div class="text-center pt-6">
                <a href="pricing.html" class="inline-flex items-center gap-2 text-slate-400 font-bold hover:text-green-700 transition-all group">
                    <i class="fas fa-chevron-right text-[10px] group-hover:-translate-x-2 transition-transform"></i>
                    ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø§Ù‚Ø©
                </a>
            </div>
        </div>
        
        <div class="bg-slate-50/50 p-8 text-center border-t border-slate-100">
            <p class="text-[11px] text-slate-400 font-black uppercase tracking-widest">
                Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ù„Ù„Ø³ØªØ± ÙˆØ§Ù„Ø­Ù„Ø§Ù„ Â© 2025
            </p>
        </div>
    </div>

    <div id="copyToast" class="flex items-center gap-3">
        <i class="fas fa-copy text-green-400"></i>
        ØªÙ… Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!
    </div>

    <script>
        const REAL_ACCOUNT = "1705644";

        window.onload = function() {
            // 1. Authentication Check
            const token = localStorage.getItem('naseeb_token');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }

            // 2. Get Selected Plan from Session Storage
            const selectedPlan = JSON.parse(sessionStorage.getItem('selectedPlan'));
            if (!selectedPlan) {
                // If no plan is selected, redirect to pricing page
                window.location.href = 'pricing.html';
                return;
            }

            // 3. Get User's Country Info
            const currencyData = JSON.parse(localStorage.getItem('currencyData')) || { isSudan: true };

            // 4. Render Dynamic Content
            document.getElementById('planTitle').innerText = selectedPlan.name;
            document.getElementById('planPrice').innerText = selectedPlan.price;
            document.getElementById('planCurrency').innerText = selectedPlan.currency;

            renderPaymentInstructions(currencyData.isSudan, selectedPlan);
        };

        function renderPaymentInstructions(isSudan, plan) {
            const container = document.getElementById('payment-instructions');
            const userName = localStorage.getItem('naseeb_user_name') || 'Ø¹Ø¶Ùˆ Ø¬Ø¯ÙŠØ¯';
            
            if (isSudan) {
                container.innerHTML = `
                    <div class="space-y-4 text-center">
                        <p class="font-black text-slate-400 text-[11px] uppercase tracking-[0.2em]">1. Ø­ÙˆÙ‘Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ø¨Ø± Ø¨Ù†ÙƒÙƒ</p>
                        <div class="bg-white border-2 border-slate-200 p-8 rounded-[3rem] cursor-pointer active:scale-95 group" onclick="copyAccount()">
                            <p class="text-2xl font-black text-slate-800 mb-4 relative z-10">Ù…ØµØ¹Ø¨ (Ù†ØµÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ)</p>
                            <div class="inline-block bg-slate-100 px-8 py-3 rounded-2xl border-2 border-slate-200 group-hover:border-green-500 transition-colors">
                                <p id="displayAcc" class="text-3xl font-mono font-black text-green-700 tracking-widest">*******</p>
                            </div>
                            <div class="mt-6 flex items-center justify-center gap-3 text-slate-500 font-bold text-xs">
                                <span class="flex h-3 w-3 relative"><span class="animate-ping absolute h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span></span>
                                Ø§Ø¶ØºØ· Ù„Ù†Ø³Ø® Ø§Ù„Ø±Ù‚Ù… ÙˆÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4 text-center mt-8">
                        <p class="font-black text-slate-400 text-[11px] uppercase tracking-[0.2em]">2. Ø£Ø±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„</p>
                        <a href="https://wa.me/249127910778?text=${encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù†ØµÙŠØ¨ØŒ Ø£Ù†Ø§ ${userName} ÙˆØ£ÙˆØ¯ ØªÙØ¹ÙŠÙ„ (${plan.name}). Ù‡Ø°Ø§ Ù‡Ùˆ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„.`)}" 
                           target="_blank" class="flex items-center justify-center gap-3 bg-green-600 text-white p-5 rounded-2xl font-black shadow-xl shadow-green-900/20">
                            <i class="fab fa-whatsapp text-3xl"></i>
                            <span>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</span>
                        </a>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="space-y-4 text-center">
                        <p class="font-black text-slate-400 text-[11px] uppercase tracking-[0.2em]">Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¯ÙˆÙ„ÙŠ</p>
                        <p class="text-slate-600 font-bold">Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†ØŒ ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø¹Ø¨Ø± Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p>
                        <a href="https://wa.me/249127910778?text=${encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ù†ØµÙŠØ¨ØŒ Ø£Ù†Ø§ ${userName} ÙˆØ£ÙˆØ¯ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ (${plan.name}) Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†.`)}" 
                           target="_blank" class="flex items-center justify-center gap-3 bg-green-600 text-white p-5 rounded-2xl font-black shadow-xl shadow-green-900/20">
                            <i class="fab fa-whatsapp text-3xl"></i>
                            <span>ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„ØªÙØ¹ÙŠÙ„</span>
                        </a>
                    </div>
                `;
            }
        }

        function copyAccount() {
            navigator.clipboard.writeText(REAL_ACCOUNT).then(() => {
                const display = document.getElementById('displayAcc');
                display.innerText = REAL_ACCOUNT;
                
                const toast = document.getElementById('copyToast');
                toast.className = "show flex items-center gap-3";

                setTimeout(() => {
                    toast.className = "";
                    display.innerText = "*******";
                }, 3000);

                // Attempt to open Bankak app
                setTimeout(() => {
                    window.location.href = 'bankak://';
                }, 1000);
            });
        }
    </script>
</body>
</html>
