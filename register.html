<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุณุฌูู ุนุถููุฉ ุฌุฏูุฏุฉ - ูุตูุจ ุงูุนุงููู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>
    <style>
        body { font-family: 'Cairo', sans-serif; background: #fffafb; }
        .iti { width: 100%; }
        .iti__flag-container { right: auto; left: 0; }
        .iti--allow-dropdown input { padding-right: 6px !important; padding-left: 52px !important; }
        input, select, textarea { border: 1px solid #e5e7eb !important; transition: 0.3s; }
        input:focus, select:focus { border-color: #15803d !important; box-shadow: 0 0 0 3px rgba(21, 128, 61, 0.1) !important; }
        .bank-card { background: linear-gradient(135deg, #006a4d 0%, #004d38 100%); border-radius: 1.5rem; }
        .step-shadow { box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.05); }
    </style>
</head>
<body class="min-h-screen pb-12">

    <nav class="bg-white/80 backdrop-blur-md shadow-sm p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center px-4">
            <h1 class="text-2xl font-bold text-green-700">๐ ูุตูุจ ุงูุนุงููู</h1>
            <div class="flex gap-4 items-center">
                <a href="index.html" class="text-gray-500 font-bold hover:text-green-700 text-sm transition">ุงูุฑุฆูุณูุฉ</a>
                <a href="members.html" class="bg-green-50 text-green-700 px-4 py-2 rounded-xl font-bold text-xs hover:bg-green-100 transition">ุชุตูุญ ุงูุฃุนุถุงุก</a>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 mt-8 max-w-2xl">
        <div class="bg-white rounded-[3rem] step-shadow overflow-hidden border border-pink-50">
            <div class="bg-green-700 p-8 text-center text-white relative">
                <div class="absolute top-0 right-0 p-4 opacity-10 text-6xl font-bold italic">Naseeb</div>
                <h2 class="text-2xl font-bold mb-2">ุฅุณุชูุงุฑุฉ ุชุณุฌูู ุงููุดุชุฑููู</h2>
                <p class="text-green-100 text-sm">ุฎุทูุงุช ุจุณูุทุฉ ุชูุตูู ุนู ุฅูุฌุงุฏ ุดุฑูู ุญูุงุชู</p>
            </div>

            <form id="registrationForm" action="https://formspree.io/f/mdandyav" method="POST" class="p-8 space-y-6">
                
                <div class="bg-slate-50 p-6 rounded-3xl border border-slate-100">
                    <label class="block text-sm font-bold text-gray-700 mb-3">ุงุฎุชุฑ ููุน ุงูุนุถููุฉ ุงููุทููุจุฉ *</label>
                    <select id="selectedPlan" name="plan" required class="w-full p-4 rounded-2xl outline-none bg-white font-bold text-green-800 cursor-pointer">
                        <option value="" disabled selected>ุงุถุบุท ููุงุฎุชูุงุฑ...</option>
                        <option value="ุงููุฌุงููุฉ">ุงูุจุงูุฉ ุงููุฌุงููุฉ (ุชุตูุญ ููุท)</option>
                        <option value="ุงูุณุชุฑ">ุจุงูุฉ ุงูุณุชุฑ (7$) - ูุณุฑุนุฉ ุงูุชูููู</option>
                        <option value="ุงูุฐูุจูุฉ">ุงูุจุงูุฉ ุงูุฐูุจูุฉ (15$) - ุฃููููุฉ ุชูุงุตู</option>
                        <option value="ุงููุงุณูุฉ">ุงูุจุงูุฉ ุงููุงุณูุฉ (30$) - ุชููุฒ ูุงูู</option>
                    </select>
                </div>

                <div id="paymentSection" class="hidden transform transition-all duration-500 scale-95 opacity-0">
                    <div class="bank-card p-6 text-white shadow-xl relative overflow-hidden">
                        <div class="flex justify-between items-center mb-4 text-xs opacity-80">
                            <span>ุชุทุจูู ุจููู (BOK)</span>
                            <span>ุงูุญุณุงุจ ุงูุฑุณูู</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <h3 class="text-3xl font-mono font-bold tracking-widest">1705644</h3>
                            <button type="button" onclick="copyAccount()" class="bg-white/20 hover:bg-white/40 px-4 py-2 rounded-xl text-xs font-bold transition">ูุณุฎ ๐</button>
                        </div>
                        <p class="text-[10px] mt-3 font-bold">ุจุงุณู: ูุตุนุจ - ูุตูุจ ุงูุนุงููู</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุงูุงุณู ุงููุณุชุนุงุฑ</label>
                        <input type="text" name="name" required placeholder="ูุซูุงู: ุงูุจุงุญุซ ุนู ุงูุณุชุฑ" class="w-full p-4 rounded-2xl outline-none bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ</label>
                        <input type="file" id="imageInput" accept="image/*" required class="w-full p-3 text-xs text-gray-400 rounded-2xl bg-slate-50 border border-dashed">
                        <input type="hidden" name="image_url" id="imageUrl">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุฑูู ุงููุงุชุณุงุจ</label>
                        <input type="tel" id="phone" required class="w-full p-4 rounded-2xl outline-none text-left bg-slate-50" dir="ltr">
                        <input type="hidden" name="whatsapp" id="whatsapp_full">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ููุงู ุงูุฅูุงูุฉ</label>
                        <input type="text" name="city" required placeholder="ุงูุฏููุฉุ ุงููุฏููุฉ" class="w-full p-4 rounded-2xl outline-none bg-slate-50">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุงูุนูุฑ</label>
                        <input type="number" name="age" required min="18" class="w-full p-4 rounded-2xl outline-none bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุงูููุน</label>
                        <select name="gender" required class="w-full p-4 rounded-2xl outline-none bg-slate-50">
                            <option value="ุฐูุฑ">ุฐูุฑ</option>
                            <option value="ุฃูุซู">ุฃูุซู</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-2 mr-2">ุงูุญุงูุฉ</label>
                        <select name="status" required class="w-full p-4 rounded-2xl outline-none bg-slate-50">
                            <option value="ุฃุนุฒุจ">ุฃุนุฒุจ</option>
                            <option value="ูุทูู">ูุทูู</option>
                            <option value="ุฃุฑูู">ุฃุฑูู</option>
                            <option value="ุชุนุฏุฏ">ุชุนุฏุฏ</option>
                        </select>
                    </div>
                </div>

                <div class="bg-blue-50 p-6 rounded-3xl border border-blue-100">
                    <label class="block text-sm font-bold text-blue-700 mb-3">ุชุนููู ูููุฉ ุณุฑ (ููุฏุฎูู ูุณุชูุจูุงู) *</label>
                    <input type="password" name="password" required placeholder="ุงุฎุชุฑ ูููุฉ ุณุฑ ูููุฉ" class="w-full p-4 rounded-2xl outline-none bg-white shadow-sm focus:ring-2 focus:ring-blue-400 border-none">
                </div>

                <div class="pt-4">
                    <button type="submit" id="submitBtn" class="w-full bg-green-700 text-white font-bold py-5 rounded-[2rem] shadow-xl hover:bg-green-800 transition-all flex items-center justify-center gap-3">
                        <span>ุฅุฑุณุงู ุงูุทูุจ ูุงูุชูุซูู</span>
                        <span id="loader" class="hidden animate-spin border-2 border-white/30 border-t-white rounded-full w-5 h-5"></span>
                    </button>
                    <p id="statusMsg" class="text-center text-xs font-bold mt-4 opacity-0 transition-opacity"></p>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script>
        const IMGBB_API_KEY = "ef5f93c776a98bfd2a4ef1d6cdeba6bf";
        const form = document.getElementById("registrationForm");
        const planSelect = document.getElementById("selectedPlan");
        const paymentSection = document.getElementById("paymentSection");
        const btn = document.getElementById("submitBtn");
        const loader = document.getElementById("loader");
        const status = document.getElementById("statusMsg");

        const phoneInputField = document.querySelector("#phone");
        const phoneInput = window.intlTelInput(phoneInputField, {
            preferredCountries: ["sd", "sa", "ae", "eg", "qa"],
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
        });

        planSelect.addEventListener("change", function() {
            if(this.value !== "ุงููุฌุงููุฉ") {
                paymentSection.classList.remove("hidden");
                setTimeout(() => paymentSection.classList.add("scale-100", "opacity-100"), 10);
            } else {
                paymentSection.classList.remove("scale-100", "opacity-100");
                setTimeout(() => paymentSection.classList.add("hidden"), 500);
            }
        });

        function copyAccount() {
            navigator.clipboard.writeText('1705644');
            alert('ุชู ูุณุฎ ุฑูู ุงูุญุณุงุจ ๐');
        }

        form.addEventListener("submit", async function(event) {
            event.preventDefault();
            btn.disabled = true;
            loader.classList.remove("hidden");
            status.style.opacity = "1";
            status.innerText = "โณ ุฌุงุฑู ุฑูุน ุจูุงูุงุชู ูุตูุฑู...";
            status.className = "text-center text-xs font-bold mt-4 text-blue-600";

            const imageFile = document.getElementById('imageInput').files[0];
            const formData = new FormData();
            formData.append('image', imageFile);

            try {
                const imgResponse = await fetch(`https://api.imgbb.com/1/upload?key=${IMGBB_API_KEY}`, {
                    method: 'POST', body: formData
                });
                const imgData = await imgResponse.json();
                
                if (imgData.success) {
                    const finalUrl = imgData.data.url;
                    document.getElementById('imageUrl').value = finalUrl;
                    document.getElementById('whatsapp_full').value = phoneInput.getNumber();

                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: new FormData(form),
                        headers: { 'Accept': 'application/json' }
                    });

                    if (response.ok) {
                        status.innerText = "โ ุชู ุงูุฅุฑุณุงู! ุณูุชู ูุชุญ ูุงุชุณุงุจ ููุชูุซูู ุซู ุฅุนุงุฏุชู ููุฑุฆูุณูุฉ...";
                        status.className = "text-center text-xs font-bold mt-4 text-green-600";
                        
                        const waMsg = `ุทูุจ ุชุณุฌูู ุฌุฏูุฏ\n๐ค ุงูุงุณู: ${form.name.value}\n๐ ุงูุณุฑ: ${form.password.value}\n๐ผ๏ธ ุงูุตูุฑุฉ: ${finalUrl}`;
                        
                        // ูุชุญ ุงููุงุชุณุงุจ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ
                        window.open(`https://wa.me/249127910778?text=${encodeURIComponent(waMsg)}`, '_blank');
                        
                        // ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ ุจุนุฏ 3 ุซูุงูู
                        setTimeout(() => {
                            window.location.href = "index.html";
                        }, 3000);
                    }
                }
            } catch (error) {
                btn.disabled = false;
                loader.classList.add("hidden");
                status.innerText = "โ ุญุฏุซ ุฎุทุฃุ ุญุงูู ูุฌุฏุฏุงู.";
                status.className = "text-center text-xs font-bold mt-4 text-red-600";
            }
        });
    </script>
</body>
</html>
